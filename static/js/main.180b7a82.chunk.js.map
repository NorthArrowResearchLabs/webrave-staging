{"version":3,"sources":["../../src/index.ts","../../src/config.ts","../../../src/modals/ShareDialog.tsx","../../src/types.ts","../../../src/misc/WarehouseTags.tsx","../../../src/misc/DownloadZipBtn.tsx","../../../src/misc/WebRaveBtn.tsx","../../src/constants.ts","../../../src/frame/Footer.tsx","../../../src/frame/Topbar.tsx","../../src/xml.ts","../../src/api.ts","../../src/schema.graphql.ts","../../../src/classes/Program.ts","../../../src/classes/Project.ts","../../../src/classes/errors.ts","../../../src/frame/Topbar.style.ts","../../../src/modals/ProgramChooser.tsx","../../../../src/modals/ProjectModal/ProjectModal.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.style.ts","../../../../src/modals/ProjectModal/ProjectModal.style.ts","../../../src/modals/LoginScreen.tsx","../../../src/modals/NotAllowedModal.tsx","../../../src/hooks/useDownloads.tsx","../../../src/hooks/useProgram.ts","../../../src/hooks/useProject.ts","../../../src/hooks/useQueryParams.tsx","../../src/themes.ts","../../src/Multidot.tsx","../../src/Polygon.tsx","../../src/Polyline.tsx","../../src/QRCode.tsx","../../src/Raster.tsx","components/AppWrapper.tsx","mapStyles/index.ts","config.ts","hooks/useMapLayers.tsx","hooks/useTileLayers.tsx","lib/RaveProjectTree.ts","components/tree/TreeDrawer.tsx","hooks/useProjectTree.tsx","components/LayerIcon.tsx","components/tree/treeBuild.tsx","components/tree/TreeContextMenu.tsx","components/tree/MetaData.tsx","components/WHButton.tsx","components/tree/LayerMeta.tsx","components/tree/LayerTileInfo.tsx","components/tree/LayerInfo.tsx","components/AppSplitter.tsx","components/tree/TreeControl.tsx","components/map/layers/RSPoint.tsx","components/map/layers/RSLine.tsx","components/map/layers/RSPolygon.tsx","components/map/layers/RSRaster.tsx","components/map/Map.tsx","components/tree/ProjectInfoTab.tsx","components/legend/LayerList.tsx","components/legend/ViewList.tsx","components/legend/BaseLayerPicker.tsx","components/legend/Legend.tsx","components/App.tsx","connectors/App.connect.tsx","connectors/AppAuth.connect.tsx","index.tsx"],"names":["react_1","default","createElement","_a","root","display","zIndex","theme","drawer","text","flexGrow","logo","exports","fileSort","currFolder","sort","a","children","b","color","palette","primary","contrastText","prog","role","treeItemRoot","backgroundColor","background","paper","treeItemContainer","treeItemText","marginLeft","spacing","padding","treeItemIcon","treeFile","treeFileContent","borderBottom","treeFolder","treeFolderContent","treeFolderText","allowSelect","userSelect","cursor","margin","scrollPaper","alignItems","name","maxWidth","whiteSpace","overflow","textOverflow","marginBottom","titlebar","titlebarLeft","header","headerLeft","flex","headerRight","textAlign","closeButton","colors_1","AppWrapper","title","match","history","programs","signOut","containerProps","program","useProgram","ThemeProvider","themes","home","noScroll","fullWidth","topbar","signOutHandler","shareUrl","window","location","href","mapStyles","id","toolTip","Icon","SatelliteOutlined","style","Satellite","DirectionsCarOutlined","BasicMap","TerrainOutlined","GrayscaleHS","domain","process","REACT_APP_DOMAIN","log","debug","warehouseUrl","legendColors","red","green","blue","orange","purple","cyan","lime","brown","redirectUrl","URL","endsWith","origin","console","publicUrl","SORT_ORDER","ProjectTreeLayerTypes","point","line","polygon","tin","raster","LEGEND_COLORS","useMapLayers","project","tiles","useState","layersError","setError","tree","defaultView","currView","setViewId","layers","_setLayers","setLayers","newLeaves","sortedLeaves","leafA","leafB","layerType","indexOf","leaves","sortedLayers","map","leaf","existingLyr","find","lyr","legend","length","idx","random","filter","c","idy","getColor","grey","url","undefined","isEqual","useEffect","view","views","vLeaves","vlyr","blLayerId","Object","values","status","addLayer","val","removeLayer","changeView","QUEUE","Bottleneck","maxConcurrent","InitState","zoomBounds","getNewZoomBounds","oldBounds","minZoom","maxZoom","newMax","Math","max","newBounds","globalBounds","newRect","min","useTileLayers","state","setState","stateRef","useRef","current","updateTileService","tile","oldState","tileJSON","bounds","viewLayers","newTiles","nodeExists","ProjectTreeLayerTileTypes","reduce","acc","ptLeaf","newUrl","slice","indexUrl","TilingStatus","UNKNOWN","priority","getPriority","retry","Promise","all","keys","nt","schedule","layerFetchPromise","ts","fetch","then","response","json","data","error","catch","e","newTs","updatedTs","resolve","defaultViewId","foundId","vlkey","RaveProjectTree","leafLookup","findLeafByPath","path","branch","newPath","currChoice","shift","subBranches","getLayersByView","viewId","lookupViewId","layerId","getDefaultExpandedLayers","branches","collapsed","filterTreeByTextRecursive","reqSearch","minSearchLength","raveTreeBranch","hidden","Boolean","treeBranch","label","toLowerCase","sb","searchText","buildTreeRecursive","pid","bid","tb","lv","forEach","leafPath","join","trim","this","rootBranch","Error","useStyles","makeStyles","height","flexDirection","appBar","tabs","tabContents","position","secondary","main","top","right","TreeDrawer","classes","activeTab","setValue","className","Tabs","value","onChange","event","newValue","indicatorColor","textColor","variant","aria-label","tab","Tab","tid","useProjectTree","raveTree","setSearchText","filteredTree","setFilteredTree","debouncedFilterTree","_","debounce","rt","st","LayerIcon","iconProps","Multidot","Polyline","Polygon","Raster","useLeafStyles","active","fontWeight","treeLeafLabel","innerLabel","spacer","metaIcon","opacity","fontSize","lineHeight","loadingSpinner","tileStatus","fontStyle","leafQUEUED","leafCREATING","leafERROR","leafUNKNOWN","leafSUCCESS","TreeLeaf","leafId","handleContext","activeLayer","mapAddable","hasMeta","meta","tileStatusStr","SUCCESS","QUEUED","CREATING","ERROR","CircularProgress","thickness","size","TreeItem","nodeId","clsx","onDoubleClick","Typography","Tooltip","arrow","placement","onContextMenu","preventDefault","clientX","clientY","icon","useBranchStyles","marginTop","TreeBranchRecursive","rtBranch","stopPropagation","node","TreeControl","treeLeaf","open","onClose","openMeta","Menu","keepMounted","anchorReference","anchorPosition","MenuItem","onClick","disabled","table","section","sectionHeader","metaKey","metaValue","SPECIAL_FORMATS","datecreated","valDate","dates","HTML5InputToTimestamp","formatDate","formatDateAgo","formatString","key","lwrKey","MetaData","TableContainer","Table","TableBody","rowKey","TableRow","TableCell","component","scope","align","whBtnLogo","width","whButton","Button","target","src","alt","DONTSHOW","minimal","whNote","LayerMeta","sections","k","distill","rk","replace","upstreamWarehouse","upstreamProject","upstreamLayer","Layer","makeSections","Paper","_rs_prj_projType","WHButton","LayerTileInfo","tilesJSON","Status","Started","started","lastStatus","duration","toFixed","originFile","numeral","format","lastModified","toolbar","minHeight","dark","layerTitle","layerIcon","layerMeta","overflowY","typeContainer","LayerInfo","handleClose","Toolbar","IconButton","edge","splitPane","resizer","boxSizing","backgroundClip","transition","borderTop","borderLeft","borderRight","borderColor","AppSplitter","child1","child2","split","defaultSize","minSize","maxSize","resizerClassName","pane1Style","pane2Style","container","paddingBottom","searchBox","searchBoxInput","treeObj","React","expanded","setExpanded","lyrInfo","setLyrInfo","selected","setSelected","contextMenu","setContextMenu","newExpanded","recursiveExpanded","br","push","TextField","placeholder","InputProps","input","startAdornment","InputAdornment","TreeView","defaultCollapseIcon","defaultExpandIcon","onNodeToggle","nodeIds","onNodeSelect","ctx","mousex","mousey","TreeContextMenu","left","layerProps","layer","lyrProps","type","minzoom","maxzoom","layout","paint","rsLayer","subLayers","sublyr","sl","RSPoint","lyrId","beforeId","RSLine","layerPropsOutline","RSPolygon","scheme","defaultViewport","zoom","debounceConsoleLog","Map","baseLayer","viewport","_setViewport","viewportRef","setViewport","inViewport","newViewport","pitch","bearing","longitude","latitude","baseStyle","bs","mapLayers","useMemo","layerEls","mlayer","reactkey","newComp","RSRaster","mapStyle","clickRadius","onViewportChange","mapboxApiAccessToken","config","mapConfig","mapBoxToken","btnGroup","justifyContent","divider","footerLogo","ProjectInfoTab","downloadZipFile","pendingZips","projectInfo","Title","Type","projType","Array","isArray","tags","createdOn","updatedOn","pendingSince","paragraph","Divider","heading","layerItem","legendName","deleteButtonHover","legendColor","border","marginRight","deleteButton","LayerList","removeItem","useTheme","List","dense","ListItem","ListItemAvatar","ListItemText","ListItemSecondaryAction","Legend2","activeView","projectViews","handleChange","viewOptions","viewOpts","v","defaultString","FormControl","InputLabel","htmlFor","Select","menuIcon","menuItem","BaseLayerPicker","baseLayers","setBaseLayer","selectMenu","subheaders","Legend","ViewList","legendBox","borderRadius","boxShadow","mapMock","transform","drawerContents","drawerSpacer","drawerSpacerOpen","dialogContainer","dialog","dummyText","App","drawerOpen","setDrawerOpen","AppConnect","auth","useProject","isProjLoading","loading","useDownloads","hasViewAccess","WarehouseRoleEnum","info","logoSVG","AppAuthConnect","authInfo","setAuthInfo","programsState","setProgramsState","isAppPreLoading","setIsAppPreLoading","useHosted","isDev","useHistory","authCheck","endpoints","graphql","authResp","authVals","region","userPoolId","userPool","userPoolWebClientId","clientId","mandatorySignIn","oauth","redirectSignIn","toString","redirectSignOut","responseType","err","storageUrl","localStorage","getItem","localUrl","pathname","isAuthenticated","isAuthComplete","setItem","navigate","useCallback","machineName","getCurrentToken","jwt","getPrograms","allPrograms","message","version","appWrapProps","render","props","signIn","devSetup","require","ReactDOM","basename","document","getElementById","addEventListener","pushState","navigator","storage","persist","granted","warn"],"mappings":"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","file":"static/js/main.180b7a82.chunk.js","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.config = exports.themes = exports.useQueryParams = exports.useProject = exports.useProgram = exports.useDownloads = exports.NotAllowedModal = exports.LoginScreen = exports.ShareDialog = exports.ProjectModal = exports.ProgramChooser = exports.WebRaveBtn = exports.DownloadZipBtn = exports.WarehouseTags = exports.Topbar = exports.Footer = void 0;\nvar Footer_1 = require(\"./frame/Footer\");\nObject.defineProperty(exports, \"Footer\", { enumerable: true, get: function () { return __importDefault(Footer_1).default; } });\nvar Topbar_1 = require(\"./frame/Topbar\");\nObject.defineProperty(exports, \"Topbar\", { enumerable: true, get: function () { return __importDefault(Topbar_1).default; } });\nvar WarehouseTags_1 = require(\"./misc/WarehouseTags\");\nObject.defineProperty(exports, \"WarehouseTags\", { enumerable: true, get: function () { return __importDefault(WarehouseTags_1).default; } });\nvar DownloadZipBtn_1 = require(\"./misc/DownloadZipBtn\");\nObject.defineProperty(exports, \"DownloadZipBtn\", { enumerable: true, get: function () { return __importDefault(DownloadZipBtn_1).default; } });\nvar WebRaveBtn_1 = require(\"./misc/WebRaveBtn\");\nObject.defineProperty(exports, \"WebRaveBtn\", { enumerable: true, get: function () { return __importDefault(WebRaveBtn_1).default; } });\nvar ProgramChooser_1 = require(\"./modals/ProgramChooser\");\nObject.defineProperty(exports, \"ProgramChooser\", { enumerable: true, get: function () { return __importDefault(ProgramChooser_1).default; } });\nvar ProjectModal_1 = require(\"./modals/ProjectModal/ProjectModal\");\nObject.defineProperty(exports, \"ProjectModal\", { enumerable: true, get: function () { return __importDefault(ProjectModal_1).default; } });\nvar ShareDialog_1 = require(\"./modals/ShareDialog\");\nObject.defineProperty(exports, \"ShareDialog\", { enumerable: true, get: function () { return __importDefault(ShareDialog_1).default; } });\nvar LoginScreen_1 = require(\"./modals/LoginScreen\");\nObject.defineProperty(exports, \"LoginScreen\", { enumerable: true, get: function () { return __importDefault(LoginScreen_1).default; } });\nvar NotAllowedModal_1 = require(\"./modals/NotAllowedModal\");\nObject.defineProperty(exports, \"NotAllowedModal\", { enumerable: true, get: function () { return __importDefault(NotAllowedModal_1).default; } });\nvar useDownloads_1 = require(\"./hooks/useDownloads\");\nObject.defineProperty(exports, \"useDownloads\", { enumerable: true, get: function () { return __importDefault(useDownloads_1).default; } });\nvar useProgram_1 = require(\"./hooks/useProgram\");\nObject.defineProperty(exports, \"useProgram\", { enumerable: true, get: function () { return __importDefault(useProgram_1).default; } });\nvar useProject_1 = require(\"./hooks/useProject\");\nObject.defineProperty(exports, \"useProject\", { enumerable: true, get: function () { return __importDefault(useProject_1).default; } });\nvar useQueryParams_1 = require(\"./hooks/useQueryParams\");\nObject.defineProperty(exports, \"useQueryParams\", { enumerable: true, get: function () { return __importDefault(useQueryParams_1).default; } });\nvar themes_1 = require(\"./themes\");\nObject.defineProperty(exports, \"themes\", { enumerable: true, get: function () { return __importDefault(themes_1).default; } });\nexports.config = __importStar(require(\"./config\"));\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./constants\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.awsAuth = exports.redirectUrl = exports.mandatoryMetaColors = exports.endpoints = exports.version = exports.mapConfig = exports.isDev = exports.tagColors = void 0;\nvar colors_1 = require(\"@material-ui/core/colors\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nexports.tagColors = {\n    tagColors: [\n        '#418CF0',\n        '#FCB441',\n        '#E0400A',\n        '#056492',\n        '#BFBFBF',\n        '#1A3B69',\n        '#FFE382',\n        '#129CDD',\n        '#CA6B4B',\n        '#005CDB',\n        '#F3D288',\n        '#506381',\n        '#F1B9A8',\n        '#E0830A',\n        '#7893BE'\n    ]\n};\nvar domain = process.env.REACT_APP_DOMAIN;\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n    domain = 'localhost';\n}\nloglevel_1.default.debug('config: ', { domain: domain });\nexports.isDev = process.env.NODE_ENV && process.env.NODE_ENV === 'development';\nexports.mapConfig = {\n    mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexports.version = process.env.REACT_APP_VERSION;\nexports.endpoints = {\n    graphql: process.env.REACT_APP_GRAPHQL,\n    cdn: process.env.REACT_APP_CDN\n};\nexports.mandatoryMetaColors = [colors_1.red, colors_1.green, colors_1.blue, colors_1.orange, colors_1.purple, colors_1.cyan, colors_1.lime, colors_1.brown];\nexports.redirectUrl = new URL(process.env.PUBLIC_URL.endsWith('/') ? process.env.PUBLIC_URL : process.env.PUBLIC_URL + '/', window.location.origin);\nconsole.log('RedirectUrl', { redirectUrl: exports.redirectUrl, publicUrl: process.env.PUBLIC_URL });\nexports.awsAuth = {\n    Auth: {\n        region: process.env.REACT_APP_AWS_REGION_DEPLOY,\n        userPoolId: process.env.REACT_APP_AWS_USERPOOLID,\n        userPoolWebClientId: process.env.REACT_APP_AWS_USERPOOLWEBCLIENTID,\n        mandatorySignIn: true,\n        oauth: {\n            domain: process.env.REACT_APP_HOSTED_DOMAIN,\n            scope: ['email', 'profile', 'openid'],\n            redirectSignIn: exports.redirectUrl,\n            redirectSignOut: exports.redirectUrl,\n            responseType: 'code'\n        }\n    }\n};\n//# sourceMappingURL=config.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar TextField_1 = __importDefault(require(\"@material-ui/core/TextField\"));\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar Close_1 = __importDefault(require(\"@material-ui/icons/Close\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar DialogContentText_1 = __importDefault(require(\"@material-ui/core/DialogContentText\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar react_share_1 = require(\"react-share\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {},\n    shareIconTitle: {},\n    shareButtons: {\n        margin: theme.spacing(1, 0),\n        '&>*': {\n            marginRight: theme.spacing(1)\n        }\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    dlgTitle: {\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        display: 'flex'\n    },\n    closeButton: {\n        flex: '0 0'\n    }\n}); });\nvar ShareDialog = function (_a) {\n    var open = _a.open, shareUrl = _a.shareUrl, handleClose = _a.handleClose;\n    var classes = useStyles();\n    return (react_1.default.createElement(Dialog_1.default, { open: open, onClose: handleClose, \"aria-labelledby\": \"form-dialog-title\" },\n        react_1.default.createElement(DialogTitle_1.default, { className: classes.dlgTitle, disableTypography: true },\n            react_1.default.createElement(IconButton_1.default, { color: \"inherit\" },\n                react_1.default.createElement(Share_1.default, { className: classes.shareIconTitle })),\n            react_1.default.createElement(Typography_1.default, { variant: \"h4\", className: classes.flexGrow }, \"Share\"),\n            react_1.default.createElement(\"div\", { className: classes.closeButton },\n                react_1.default.createElement(IconButton_1.default, { onClick: handleClose, color: \"inherit\" },\n                    react_1.default.createElement(Close_1.default, null)))),\n        react_1.default.createElement(DialogContent_1.default, null,\n            react_1.default.createElement(DialogContentText_1.default, null, \"Copy this link and share it using your preferred method.\"),\n            react_1.default.createElement(TextField_1.default, { value: shareUrl, margin: \"dense\", id: \"name\", variant: \"outlined\", fullWidth: true, inputProps: {\n                    onClick: function (e) {\n                        e.preventDefault();\n                        var target = e.target;\n                        target.select();\n                    }\n                } }),\n            react_1.default.createElement(\"div\", { className: classes.shareButtons },\n                react_1.default.createElement(react_share_1.EmailShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.EmailIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.TwitterShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.TwitterIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.LinkedinShareButton, { url: shareUrl },\n                    react_1.default.createElement(react_share_1.LinkedinIcon, { size: 32, round: true })),\n                react_1.default.createElement(react_share_1.FacebookShareButton, { url: shareUrl, quote: 'title' },\n                    react_1.default.createElement(react_share_1.FacebookIcon, { size: 32, round: true }))))));\n};\nexports.default = ShareDialog;\n//# sourceMappingURL=ShareDialog.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProjectTreeLayerTileTypes = exports.ProjectTreeLayerTypes = exports.TileTypes = exports.TilingStatus = exports.AccessEnum = exports.WarehouseRoleEnum = exports.FieldTypeEnum = void 0;\nvar FieldTypeEnum;\n(function (FieldTypeEnum) {\n    FieldTypeEnum[\"string\"] = \"S\";\n    FieldTypeEnum[\"number\"] = \"N\";\n    FieldTypeEnum[\"boolean\"] = \"BOOL\";\n    FieldTypeEnum[\"stringArr\"] = \"SARR\";\n    FieldTypeEnum[\"numberArr\"] = \"NARR\";\n})(FieldTypeEnum = exports.FieldTypeEnum || (exports.FieldTypeEnum = {}));\nvar WarehouseRoleEnum;\n(function (WarehouseRoleEnum) {\n    WarehouseRoleEnum[\"SuperUser\"] = \"SUPER\";\n    WarehouseRoleEnum[\"Admin\"] = \"ADMIN\";\n    WarehouseRoleEnum[\"Observer\"] = \"OBSERVER\";\n    WarehouseRoleEnum[\"Participant\"] = \"PARTICIPANT\";\n})(WarehouseRoleEnum = exports.WarehouseRoleEnum || (exports.WarehouseRoleEnum = {}));\nvar AccessEnum;\n(function (AccessEnum) {\n    AccessEnum[\"Public\"] = \"PUBLIC\";\n    AccessEnum[\"Private\"] = \"PRIVATE\";\n    AccessEnum[\"Secret\"] = \"SECRET\";\n})(AccessEnum = exports.AccessEnum || (exports.AccessEnum = {}));\nvar TilingStatus;\n(function (TilingStatus) {\n    TilingStatus[\"QUEUED\"] = \"QUEUED\";\n    TilingStatus[\"UNKNOWN\"] = \"UNKNOWN\";\n    TilingStatus[\"CREATING\"] = \"CREATING\";\n    TilingStatus[\"ERROR\"] = \"ERROR\";\n    TilingStatus[\"SUCCESS\"] = \"SUCCESS\";\n})(TilingStatus = exports.TilingStatus || (exports.TilingStatus = {}));\nvar TileTypes;\n(function (TileTypes) {\n    TileTypes[\"RASTER\"] = \"RASTER\";\n    TileTypes[\"VECTOR_SHP\"] = \"VECTOR_SHP\";\n    TileTypes[\"VECTOR_GPKG\"] = \"VECTOR_GPKG\";\n})(TileTypes = exports.TileTypes || (exports.TileTypes = {}));\nvar ProjectTreeLayerTypes;\n(function (ProjectTreeLayerTypes) {\n    ProjectTreeLayerTypes[\"raster\"] = \"RASTER\";\n    ProjectTreeLayerTypes[\"line\"] = \"LINE\";\n    ProjectTreeLayerTypes[\"polygon\"] = \"POLYGON\";\n    ProjectTreeLayerTypes[\"point\"] = \"POINT\";\n    ProjectTreeLayerTypes[\"file\"] = \"FILE\";\n    ProjectTreeLayerTypes[\"tin\"] = \"TIN\";\n})(ProjectTreeLayerTypes = exports.ProjectTreeLayerTypes || (exports.ProjectTreeLayerTypes = {}));\nexports.ProjectTreeLayerTileTypes = [\n    ProjectTreeLayerTypes.raster,\n    ProjectTreeLayerTypes.polygon,\n    ProjectTreeLayerTypes.line,\n    ProjectTreeLayerTypes.point\n];\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1) / 2\n    },\n    tooltip: {\n        maxWidth: 220\n    }\n}); });\nvar WarehouseTags = function (_a) {\n    var tags = _a.tags, typographyProps = _a.typographyProps;\n    if (!tags)\n        return null;\n    return (react_1.default.createElement(react_1.default.Fragment, null, tags.reduce(function (acc, ts, idx) { return __spreadArray(__spreadArray([], acc), [\n        react_1.default.createElement(Typography_1.default, __assign({ variant: \"caption\" }, typographyProps, { key: \"sep-\" + idx }), idx > 0 && ', '),\n        react_1.default.createElement(Tooltip_1.default, { key: \"whTag-\" + idx, title: react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { variant: \"body1\" },\n                    \"Warehouse Tag: \",\n                    ts),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\" }, \"Warehouse tags can be added to delineate two identical projects in the warehouse\")) },\n            react_1.default.createElement(Typography_1.default, __assign({ variant: \"caption\", color: \"secondary\" }, typographyProps), ts))\n    ]); }, [])));\n};\nexports.default = WarehouseTags;\n//# sourceMappingURL=WarehouseTags.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar CircularProgress_1 = __importDefault(require(\"@material-ui/core/CircularProgress\"));\nvar CloudDownload_1 = __importDefault(require(\"@material-ui/icons/CloudDownload\"));\nvar moment_1 = __importDefault(require(\"moment\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function () { return ({\n    root: {},\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar DownloadZipBtn = function (_a) {\n    var title = _a.title, project = _a.project, pendingSince = _a.pendingSince, btnProps = _a.btnProps, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Download Project Zip\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"Click to download this project as a single zip file\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"There may be a delay if the zip file needs to be built.\")) }, title ? (react_1.default.createElement(Button_1.default, __assign({ variant: \"contained\", color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            downloadZipFile(project);\n        }, startIcon: react_1.default.createElement(CloudDownload_1.default, null) }, btnProps), title || 'ZIP')) : (react_1.default.createElement(IconButton_1.default, __assign({ color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            downloadZipFile(project);\n        } }, btnProps),\n        react_1.default.createElement(CloudDownload_1.default, null)))));\n    if (pendingSince) {\n        btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Preparing Zip\"),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"The warehouse is building your zip file for you.\"),\n                react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true },\n                    \"started \",\n                    moment_1.default(pendingSince, 'x').fromNow())) },\n            react_1.default.createElement(Button_1.default, __assign({ variant: \"outlined\", disableFocusRipple: true, disableRipple: true, disableTouchRipple: true, color: \"primary\", onClick: function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }, className: classes.disabledButton, startIcon: react_1.default.createElement(CircularProgress_1.default, { color: btnProps && btnProps.color && btnProps.color === 'secondary' ? 'primary' : 'secondary', size: 24, thickness: 6 }) }, btnProps), title || 'ZIP')));\n    }\n    return react_1.default.createElement(\"div\", { className: classes.root }, btnRender);\n};\nexports.default = DownloadZipBtn;\n//# sourceMappingURL=DownloadZipBtn.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar Public_1 = __importDefault(require(\"@material-ui/icons/Public\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function () { return ({\n    root: {},\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar WebRaveBtn = function (_a) {\n    var title = _a.title, project = _a.project, url = _a.url, btnProps = _a.btnProps;\n    var classes = useStyles();\n    if (!url || url.length === 0)\n        return null;\n    var webRaveUrl = url + \"/\" + project.program + \"/\" + project.id;\n    var btnRender = (react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, \"Explore using map\"),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\", paragraph: true }, \"Explore this data set using an online map\")) }, title ? (react_1.default.createElement(Button_1.default, __assign({ variant: \"contained\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.open(webRaveUrl);\n        }, color: \"primary\", startIcon: react_1.default.createElement(Public_1.default, null) }, btnProps), title || 'MAP')) : (react_1.default.createElement(IconButton_1.default, __assign({ color: \"primary\", onClick: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.open(webRaveUrl);\n        } }, btnProps),\n        react_1.default.createElement(Public_1.default, null)))));\n    return react_1.default.createElement(\"div\", { className: classes.root }, btnRender);\n};\nexports.default = WebRaveBtn;\n//# sourceMappingURL=WebRaveBtn.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.accessColors = void 0;\nvar common_1 = require(\"@riverscapes/common\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nexports.accessColors = (_a = {},\n    _a[common_1.WarehouseRoleEnum.SuperUser] = colors_1.pink,\n    _a[common_1.WarehouseRoleEnum.Admin] = colors_1.red,\n    _a[common_1.WarehouseRoleEnum.Participant] = colors_1.lime,\n    _a[common_1.WarehouseRoleEnum.Observer] = colors_1.blue,\n    _a);\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Container_1 = __importDefault(require(\"@material-ui/core/Container\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        display: 'flex',\n        zIndex: theme.zIndex.drawer + 1\n    },\n    text: {\n        flexGrow: 1\n    },\n    logo: {}\n}); });\nvar Footer = function (_a) {\n    var version = _a.version;\n    var classes = useStyles();\n    return (react_1.default.createElement(Container_1.default, { className: classes.root, maxWidth: \"md\" },\n        version && (react_1.default.createElement(Typography_1.default, { component: \"div\", className: classes.text, color: \"textSecondary\", variant: \"overline\" },\n            \"v.\",\n            version)),\n        react_1.default.createElement(\"img\", { className: classes.logo, alt: \"footer\", src: process.env.PUBLIC_URL + \"/cc-watermarks-riverscapes_orig.png\" })));\n};\nexports.default = Footer;\n//# sourceMappingURL=Footer.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar Toolbar_1 = __importDefault(require(\"@material-ui/core/Toolbar\"));\nvar AppBar_1 = __importDefault(require(\"@material-ui/core/AppBar\"));\nvar Divider_1 = __importDefault(require(\"@material-ui/core/Divider\"));\nvar MenuItem_1 = __importDefault(require(\"@material-ui/core/MenuItem\"));\nvar Menu_1 = __importDefault(require(\"@material-ui/core/Menu\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar SupervisorAccount_1 = __importDefault(require(\"@material-ui/icons/SupervisorAccount\"));\nvar ListAlt_1 = __importDefault(require(\"@material-ui/icons/ListAlt\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar MoreVert_1 = __importDefault(require(\"@material-ui/icons/MoreVert\"));\nvar common_1 = require(\"@riverscapes/common\");\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar core_1 = require(\"@material-ui/core\");\nvar Topbar_style_1 = __importDefault(require(\"./Topbar.style\"));\nvar ShareDialog_1 = __importDefault(require(\"../modals/ShareDialog\"));\nvar config_1 = require(\"../config\");\nvar useStyles = styles_1.makeStyles(Topbar_style_1.default);\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar TopBar = function (_a) {\n    var title = _a.title, program = _a.program, programs = _a.programs, signOutHandler = _a.signOutHandler, toolbarItems = _a.toolbarItems, shareUrl = _a.shareUrl, history = _a.history;\n    var classes = useStyles();\n    var _b = react_1.useState(false), shareOpen = _b[0], setShareOpen = _b[1];\n    var _c = react_1.useState(null), mobileMoreAnchorEl = _c[0], setMobileMoreAnchorEl = _c[1];\n    var handleMobileMenuClose = function () { return setMobileMoreAnchorEl(null); };\n    var handleShareMenuOpen = function () { return setShareOpen(true); };\n    var handleNavigate = function (nm) {\n        handleMobileMenuClose();\n        if (history)\n            history.push(\"/\" + nm.machineName);\n    };\n    var isAdmin = history && history.location.pathname.indexOf('/admin') > -1;\n    var handleAdmin = function () {\n        if (history) {\n            if (isAdmin)\n                history.push(\"/\" + program.machineName);\n            else\n                history.push(\"/\" + program.machineName + \"/admin\");\n        }\n    };\n    var handleMobileMenuOpen = function (event) { return setMobileMoreAnchorEl(event.currentTarget); };\n    var renderMobileMenu = (signOutHandler || programs) && (react_1.default.createElement(Menu_1.default, { anchorEl: mobileMoreAnchorEl, anchorOrigin: { vertical: 'top', horizontal: 'right' }, keepMounted: true, transformOrigin: { vertical: 'top', horizontal: 'right' }, open: !!mobileMoreAnchorEl, onClose: handleMobileMenuClose },\n        programs && (react_1.default.createElement(MenuItem_1.default, null,\n            react_1.default.createElement(core_1.Typography, { variant: \"overline\", onClick: function () { return history.push(\"/\"); } }, \"Programs\"))),\n        programs && react_1.default.createElement(Divider_1.default, null),\n        programs &&\n            programs.length > 0 &&\n            programs.map(function (prog, idx) { return (react_1.default.createElement(MenuItem_1.default, { disabled: (program && program.machineName === prog.machineName) || isDisabled(prog), key: \"prog-\" + idx, onClick: function () { return handleNavigate(prog); }, value: prog.machineName }, prog.name)); }),\n        signOutHandler && react_1.default.createElement(Divider_1.default, null),\n        signOutHandler && react_1.default.createElement(MenuItem_1.default, { onClick: signOutHandler }, \"Log Out\")));\n    var showAdmin = program && (program.role === common_1.WarehouseRoleEnum.Admin || program.role === common_1.WarehouseRoleEnum.SuperUser);\n    return (react_1.default.createElement(react_1.default.Fragment, null,\n        react_1.default.createElement(AppBar_1.default, { position: \"static\", className: classes.appBar },\n            react_1.default.createElement(Toolbar_1.default, { className: classes.root, disableGutters: true },\n                react_1.default.createElement(\"a\", { href: \"http://riverscapes.xyz/\" },\n                    react_1.default.createElement(\"img\", { className: classes.logo, src: 'https://riverscapes.xyz/assets/images/RiverscapesLogo.png', alt: \"logo\" })),\n                program ? (react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, program.name),\n                    react_1.default.createElement(core_1.Typography, { variant: \"caption\" }, title))) : (react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, title)),\n                react_1.default.createElement(\"div\", { className: classes.spacer }),\n                config_1.version && (react_1.default.createElement(core_1.Typography, { component: \"div\", className: classes.text, color: \"inherit\", variant: \"overline\" },\n                    \"v.\",\n                    config_1.version)),\n                showAdmin && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleAdmin, color: \"inherit\" }, isAdmin ? react_1.default.createElement(ListAlt_1.default, null) : react_1.default.createElement(SupervisorAccount_1.default, null))),\n                toolbarItems,\n                shareUrl && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleShareMenuOpen, color: \"inherit\" },\n                    react_1.default.createElement(Share_1.default, null))),\n                (signOutHandler || programs) && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleMobileMenuOpen, color: \"inherit\" },\n                    react_1.default.createElement(MoreVert_1.default, null))))),\n        renderMobileMenu,\n        react_1.default.createElement(ShareDialog_1.default, { open: shareOpen, shareUrl: shareUrl, handleClose: function () { return setShareOpen(false); } })));\n};\nexports.default = TopBar;\n//# sourceMappingURL=Topbar.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.verifyMeta = exports.augmentXML = exports.parseProjectXML = exports.parseProgramXML = exports.parseXMLMeta = exports.getXML = void 0;\nvar xml2js_1 = require(\"xml2js\");\nvar axios_1 = __importDefault(require(\"axios\"));\nvar _1 = require(\"./\");\nvar xmldom_1 = __importDefault(require(\"xmldom\"));\nfunction getXML(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, axios_1.default({\n                        url: url,\n                        method: 'get'\n                    })];\n                case 1:\n                    result = _a.sent();\n                    if (!result.data)\n                        throw new Error('Error retrieving XML file');\n                    return [2, result.data];\n            }\n        });\n    });\n}\nexports.getXML = getXML;\nfunction parseXMLMeta(metaArr) {\n    try {\n        return metaArr.reduce(function (acc, _a) {\n            var _b;\n            var $ = _a.$, _ = _a._;\n            return (__assign(__assign({}, acc), (_b = {}, _b[$.name] = _ && _.trim(), _b)));\n        }, {});\n    }\n    catch (_a) {\n        return {};\n    }\n}\nexports.parseXMLMeta = parseXMLMeta;\nfunction _recursePaths(xmlDom, products, groups, collections) {\n    var HierarchyNode = xmlDom.getElementsByTagName('Hierarchy')[0];\n    var productsInHierarchy = Array.from(HierarchyNode.getElementsByTagName('Product'));\n    var retVal = [];\n    productsInHierarchy.forEach(function (prodEl) {\n        var pathArr = [];\n        var ref = prodEl.getAttribute('ref');\n        var product = products.find(function (o) { return o.id === ref; });\n        if (!product)\n            throw new Error(\"Product not found for ref='\" + ref + \"'\");\n        var currEl = prodEl.parentNode;\n        var _loop_1 = function () {\n            var ref_1 = currEl.getAttribute('ref');\n            var tag = currEl.tagName;\n            var def = tag === 'Group' ? groups.find(function (g) { return g.id === ref_1; }) : collections.find(function (g) { return g.id === ref_1; });\n            var folder = def.folder, name_1 = def.name;\n            pathArr.push({\n                type: tag,\n                id: ref_1,\n                folder: folder,\n                name: name_1\n            });\n            currEl = currEl.parentNode;\n        };\n        while (currEl && currEl.parentNode && currEl.tagName !== 'Hierarchy') {\n            _loop_1();\n        }\n        retVal.push(__assign(__assign({}, product), { pathArr: pathArr.reverse() }));\n    });\n    return retVal;\n}\nfunction parseProgramXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProgramJSON, _a, projectFile, projectXSDs, meta, collections, groups, productsRaw, xmlDom, products;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProgramJSON = _b.sent();\n                    _a = parseXMLMeta(parsedProgramJSON.Program.MetaData[0].Meta), projectFile = _a.projectFile, projectXSDs = _a.projectXSDs, meta = __rest(_a, [\"projectFile\", \"projectXSDs\"]);\n                    collections = parsedProgramJSON.Program.Definitions[0].Collections[0].Collection.map(function (_a) {\n                        var $ = _a.$, Allow = _a.Allow, AllowRegex = _a.AllowRegex;\n                        return (__assign(__assign({}, $), { Allow: Allow ? (Array.isArray(Allow) ? Allow.map(function (a) { return a.$; }) : [Allow]) : undefined, AllowRegex: AllowRegex\n                                ? Array.isArray(AllowRegex)\n                                    ? AllowRegex.map(function (a) { return a.$.pattern; })\n                                    : [AllowRegex.pattern]\n                                : undefined }));\n                    });\n                    groups = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Groups[0].Group) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Groups[0].Group))\n                            groups = parsedProgramJSON.Program.Definitions[0].Groups[0].Group.map(function (a) { return a.$; });\n                        else\n                            groups = [parsedProgramJSON.Program.Definitions[0].Groups[0].Group];\n                    }\n                    productsRaw = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Products[0].Product) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Products[0].Product))\n                            productsRaw = parsedProgramJSON.Program.Definitions[0].Products[0].Product.map(function (a) { return a.$; });\n                        else\n                            productsRaw = [parsedProgramJSON.Program.Definitions[0].Products[0].Product];\n                    }\n                    xmlDom = new xmldom_1.default.DOMParser().parseFromString(rawXML);\n                    products = _recursePaths(xmlDom, productsRaw, groups, collections);\n                    return [2, Promise.resolve(new _1.Program({\n                            name: parsedProgramJSON.Program.Name[0],\n                            machineName: parsedProgramJSON.Program.MachineName[0],\n                            projectXSDs: projectXSDs,\n                            projectFile: projectFile,\n                            meta: meta,\n                            products: products,\n                            collections: collections,\n                            groups: groups\n                        }))];\n            }\n        });\n    });\n}\nexports.parseProgramXML = parseProgramXML;\nfunction parseProjectXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProjectJSON, retVal, whMeta, meta;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProjectJSON = _a.sent();\n                    retVal = parsedProjectJSON.Project;\n                    whMeta = {};\n                    if (retVal.Warehouse) {\n                        whMeta = parseXMLMeta(retVal.Warehouse[0].Meta);\n                    }\n                    meta = {};\n                    if (retVal.MetaData) {\n                        meta = parseXMLMeta(retVal.MetaData[0].Meta);\n                    }\n                    return [2, Promise.resolve({\n                            id: whMeta.id,\n                            name: retVal.Name[0],\n                            projType: retVal.ProjectType[0],\n                            Warehouse: whMeta,\n                            program: whMeta.program,\n                            meta: meta,\n                            tags: _1.Project.parseTagString(whMeta.tags),\n                            xml: rawXML,\n                            parsedProjectJSON: parsedProjectJSON,\n                            rawXML: rawXML\n                        })];\n            }\n        });\n    });\n}\nexports.parseProjectXML = parseProjectXML;\nfunction augmentXML(newMeta, xmlfile) {\n    var parsed = new xmldom_1.default.DOMParser().parseFromString(xmlfile);\n    var metadata = parsed.getElementsByTagName('MetaData')[0];\n    if (parsed.getElementsByTagName('Warehouse').length > 0) {\n        parsed.removeChild(parsed.getElementsByTagName('Warehouse')[0]);\n    }\n    var warehouseNode = parsed.createElement('Warehouse');\n    Object.keys(newMeta).forEach(function (k) {\n        var mNode = parsed.createElement('Meta');\n        mNode.setAttribute('name', k);\n        mNode.appendChild(parsed.createTextNode(newMeta[k]));\n        warehouseNode.appendChild(mNode);\n    });\n    parsed.insertBefore(warehouseNode, metadata);\n    var formatted = new xmldom_1.default.XMLSerializer().serializeToString(parsed);\n    return formatted;\n}\nexports.augmentXML = augmentXML;\nfunction verifyMeta(projType, projectMeta, program) {\n    var projectDef = program.products.find(function (p) { return p.id === projType; });\n    if (!projectDef) {\n        throw new Error(\"No project type '\" + projType + \"' found in program '\" + program.name + \"'\");\n    }\n    var collectionathArrs = projectDef.pathArr.filter(function (f) { return f.type === 'Collection'; });\n    return collectionathArrs.map(function (arrEl) { return ({\n        name: arrEl.name,\n        value: projectMeta[arrEl.name]\n    }); });\n}\nexports.verifyMeta = verifyMeta;\n//# sourceMappingURL=xml.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.adminGetUsers = exports.adminUpdateUserPermissions = exports.search = exports.deleteProject = exports.downloadZipFile = exports.downloadFile = exports.getUploadUrls = exports.getProject = exports.getProgram = exports.getPrograms = exports.validateProjectXML = exports.authCheck = exports.apiCall = void 0;\nvar axios_1 = __importDefault(require(\"axios\"));\nvar graphql_1 = require(\"graphql\");\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar _1 = require(\"./\");\nvar apiCall = function (url, jwt, query, variables) {\n    return axios_1.default({\n        url: url,\n        method: 'post',\n        headers: jwt\n            ? {\n                Authorization: \"Bearer \" + jwt\n            }\n            : null,\n        data: {\n            query: graphql_1.print(query),\n            variables: variables\n        }\n    })\n        .then(function (_a) {\n        var axiosData = _a.data;\n        return axiosData;\n    })\n        .catch(function (err) {\n        if (err.response && err.response.status === 404) {\n            throw new Error(\"API Url not found: \" + url);\n        }\n        else if (err.code && err.code === 'ECONNREFUSED') {\n            throw new Error(\"Connection refused. Could not contact: '\" + url + \"'\");\n        }\n        else {\n            loglevel_1.default.error('apiCall Error', { url: url, jwt: jwt, query: graphql_1.print(query), variables: variables, err: err });\n            throw err;\n        }\n    });\n};\nexports.apiCall = apiCall;\nfunction authCheck(url, jwt) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"], [\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"]))), {});\n}\nexports.authCheck = authCheck;\nfunction validateProjectXML(url, jwt, xml, projType, program) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"], [\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"]))), { xml: xml, program: program, projType: projType });\n}\nexports.validateProjectXML = validateProjectXML;\nfunction getPrograms(url, jwt) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"])))).then(function (gqlReturn) {\n                    return __assign(__assign({}, gqlReturn), { data: {\n                            programs: gqlReturn.data.programs.map(_1.Program.fromGraphQL)\n                        } });\n                })];\n        });\n    });\n}\nexports.getPrograms = getPrograms;\nfunction getProgram(url, jwt, programName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, program, errors;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"]))), { program: programName })];\n                case 1:\n                    _a = _b.sent(), program = _a.data.program, errors = _a.errors;\n                    return [2, {\n                            data: {\n                                program: _1.Program.fromGraphQL(program)\n                            },\n                            errors: errors\n                        }];\n            }\n        });\n    });\n}\nexports.getProgram = getProgram;\nfunction getProject(url, jwt, id, program, files, tree) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \", \"\\n                    \", \"\\n                }\\n            }\\n        \"], [\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \",\n                    \"\\n                    \",\n                    \"\\n                }\\n            }\\n        \"])), files\n                    ? \"\\n                    files {\\n                        key\\n                        md5\\n                        size\\n                        downloadUrl\\n                    }\"\n                    : '', tree\n                    ? \"\\n                        tree {\\n                            name\\n                            description\\n                            projectType\\n                            metaStr\\n                            leaves {\\n                                pid\\n                                label\\n                                layerId\\n                                blLayerId\\n                                layerType\\n                                url\\n                                layerName\\n                                nodeExists\\n                                metaStr\\n                            }\\n                            branches {\\n                                label\\n                                collapsed\\n                                bid\\n                                pid\\n                            }\\n                            defaultView\\n                            views  {\\n                                id\\n                                name\\n                                description\\n                                layers{\\n                                id\\n                                visible\\n                                }\\n                            }\\n                        }\\n                    \"\n                    : ''), { id: id, program: program }).then(function (gqlReturn) { return (__assign(__assign({}, gqlReturn), { data: {\n                        project: _1.Project.fromGraphQL(gqlReturn.data.project)\n                    } })); })];\n        });\n    });\n}\nexports.getProject = getProject;\nfunction getUploadUrls(url, jwt, id, fileList, projectType, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"]))), { id: id, files: fileList, projectType: projectType, program: program })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.getUploadUrls = getUploadUrls;\nfunction downloadFile(url, jwt, projType, program, id, filePath) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"], [\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id, filePath: filePath })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadFile = downloadFile;\nfunction downloadZipFile(url, jwt, projType, program, id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"], [\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadZipFile = downloadZipFile;\nfunction deleteProject(url, jwt, id, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"], [\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"]))), { program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.deleteProject = deleteProject;\nfunction search(url, jwt, program, params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, _a, nextToken, projects, total;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"], [\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"]))), __assign(__assign({}, params), { program: program }))];\n                case 1:\n                    res = _b.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        _a = res.data.search || {}, nextToken = _a.nextToken, projects = _a.projects, total = _a.total;\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    search: {\n                                        projects: Array.isArray(projects) ? projects.map(_1.Project.fromGraphQL) : projects,\n                                        nextToken: nextToken,\n                                        total: total\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.search = search;\nfunction adminUpdateUserPermissions(url, jwt, id, program, permission) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"], [\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"]))), { program: program, id: id, permission: permission })];\n                case 1:\n                    response = _a.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    updateUser: response.data.updateUser\n                                        ? __assign(__assign({}, response.data.updateUser), { createdOn: parseInt(response.data.updateUser.createdOn, 10), updatedOn: parseInt(response.data.updateUser.updatedOn, 10) }) : null\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminUpdateUserPermissions = adminUpdateUserPermissions;\nfunction adminGetUsers(url, jwt, program, limit, nextToken) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, _a, nextTokenNEW, users;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_12 || (templateObject_12 = __makeTemplateObject([\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"], [\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"]))), { program: program, limit: limit, nextToken: nextToken })];\n                case 1:\n                    response = _b.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        _a = response.data.getUsers || {}, nextTokenNEW = _a.nextToken, users = _a.users;\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    getUsers: {\n                                        users: Array.isArray(users)\n                                            ? users.map(function (u) { return (__assign(__assign({}, u), { createdOn: parseInt(u.createdOn, 10), updatedOn: parseInt(u.updatedOn, 10) })); })\n                                            : users,\n                                        nextToken: nextTokenNEW\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminGetUsers = adminGetUsers;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12;\n//# sourceMappingURL=api.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar types_1 = require(\"./types\");\nvar typeDefs = graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        url: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID!\\n        views: [ProjectTreeViews]\\n    }\\n\"], [\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        url: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID!\\n        views: [ProjectTreeViews]\\n    }\\n\"])), Object.values(types_1.ProjectTreeLayerTypes).join('\\n      '));\nexports.default = typeDefs;\nvar templateObject_1;\n//# sourceMappingURL=schema.graphql.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Program = void 0;\nvar Program = (function () {\n    function Program(programObj) {\n        Object.assign(this, programObj);\n    }\n    Program.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        var meta = JSON.parse(input.meta);\n        return new Program(__assign(__assign({}, input), { meta: meta, role: input.role, products: input.products.map(function (p) { return (__assign(__assign({}, p), { pathArr: JSON.parse(p.pathArr) })); }) }));\n    };\n    return Program;\n}());\nexports.Program = Program;\n//# sourceMappingURL=Program.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Project = void 0;\nvar path_1 = __importDefault(require(\"path\"));\nfunction fileSort(currFolder) {\n    currFolder.sort(function (a, b) {\n        if (a.children && !b.children)\n            return -1;\n        if (!a.children && b.children)\n            return 1;\n        if (a.name.toLowerCase() < b.name.toLowerCase())\n            return -1;\n        if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n        return 0;\n    });\n}\nvar Project = (function () {\n    function Project(projectObj) {\n        var _this = this;\n        this.treeIzeFilePaths = function () {\n            var root = [];\n            _this.files.forEach(function (_a) {\n                var key = _a.key;\n                var pathArr = key.split('/');\n                if (pathArr.length === 1 && key.indexOf('\\\\') > -1) {\n                    pathArr = key.split('\\\\');\n                }\n                var currFolder = root;\n                var _loop_1 = function () {\n                    var folder = { name: pathArr.shift(), children: [] };\n                    var found = currFolder.find(function (f) { return f.name === folder.name; });\n                    if (found && found.children) {\n                        currFolder = found.children;\n                    }\n                    else {\n                        currFolder.push(folder);\n                        currFolder = folder.children;\n                    }\n                    fileSort(currFolder);\n                };\n                while (pathArr.length > 1) {\n                    _loop_1();\n                }\n                currFolder.push({ name: pathArr[0], path: key });\n            });\n            fileSort(root);\n            return root;\n        };\n        Object.assign(this, projectObj);\n        if (!this.files)\n            this.files = [];\n        if (this.tree && this.tree.leaves) {\n            this.tree.leaves = this.tree.leaves.map(function (lf) { return (__assign(__assign({}, lf), { meta: lf.metaStr ? JSON.parse(lf.metaStr) : {} })); });\n        }\n    }\n    Project.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        return new Project(__assign(__assign({}, input), { createdOn: parseInt(input.createdOn, 10), updatedOn: parseInt(input.updatedOn, 10), meta: input.meta ? JSON.parse(input.meta) : {}, tags: input.tags ? input.tags.split(',') : [] }));\n    };\n    Project.diff = function (left, right) {\n        var different = [];\n        var same = [];\n        if (!right || right.length === 0) {\n            return {\n                leftOnly: left.map(function (f) { return f.key; }),\n                rightOnly: [],\n                different: [],\n                same: []\n            };\n        }\n        else if (!left || left.length === 0) {\n            return {\n                leftOnly: [],\n                rightOnly: right.map(function (f) { return f.key; }),\n                different: [],\n                same: []\n            };\n        }\n        var leftOnly = left\n            .filter(function (leftFile) {\n            var found = right.find(function (rightFile) { return leftFile.key === rightFile.key; });\n            if (found) {\n                if (found.md5 === leftFile.md5)\n                    same.push(leftFile.key);\n                else\n                    different.push(leftFile.key);\n            }\n            return !found;\n        })\n            .map(function (f) { return f.key; });\n        var rightOnly = right\n            .filter(function (rightFile) { return !left.find(function (leftFile) { return rightFile.key === leftFile.key; }); })\n            .map(function (f) { return f.key; });\n        return {\n            leftOnly: leftOnly,\n            rightOnly: rightOnly,\n            different: different,\n            same: same\n        };\n    };\n    Project.getProjectS3Keys = function (program, projectId, projType) {\n        var prefix = path_1.default.join(program.machineName, projType, projectId);\n        var zipKey = prefix + \".zip\";\n        var projFileKey = path_1.default.join(prefix, program.projectFile);\n        var zipKeyPending = path_1.default.join(program.machineName, projType, projectId + \".zip.pending\");\n        var downloadFolderName = \"\" + [program.machineName, projType, projectId].join('-');\n        var downloadZipFilename = downloadFolderName + \".zip\";\n        return {\n            prefix: prefix,\n            zipKey: zipKey,\n            projFileKey: projFileKey,\n            zipKeyPending: zipKeyPending,\n            downloadFolderName: downloadFolderName,\n            downloadZipFilename: downloadZipFilename\n        };\n    };\n    Project.parseDynamoMeta = function (dynObj) {\n        var metavals = Object.keys(dynObj)\n            .filter(function (k) { return k.indexOf('META_') === 0; })\n            .reduce(function (acc, k) {\n            var _a;\n            var newk = k.split('META_')[1];\n            return __assign(__assign({}, acc), (_a = {}, _a[newk] = dynObj[k], _a));\n        }, {});\n        return JSON.stringify(metavals);\n    };\n    Project.parseTagString = function (tagString) {\n        if (!tagString || tagString.trim().length === 0)\n            return [];\n        return tagString\n            .split(',')\n            .map(function (t) { return t.trim(); })\n            .filter(function (t) { return t.length > 0 && t !== 'null' && t !== 'undefined'; });\n    };\n    Project.parseS3Key = function (program, key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var _a = key.split('/'), programMachineName = _a[0], projType = _a[1], id = _a[2];\n        if (program.machineName !== programMachineName) {\n            throw new Error(\"Program passed to parseS3 key \" + program.machineName + \" does not correspond to program in key: \" + programMachineName);\n        }\n        return Project.getProjectS3Keys(program, id, projType);\n    };\n    Project.parseS3KeyDUMB = function (key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var programMachineName = keyArr[0], projType = keyArr[1], id = keyArr[2];\n        var prefix = path_1.default.join(programMachineName, projType, id);\n        var zipKey = prefix + \".zip\";\n        return {\n            programMachineName: programMachineName,\n            projType: projType,\n            id: id,\n            zipKey: zipKey,\n            prefix: prefix\n        };\n    };\n    return Project;\n}());\nexports.Project = Project;\n//# sourceMappingURL=Project.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationError = void 0;\nvar ValidationError = (function (_super) {\n    __extends(ValidationError, _super);\n    function ValidationError(message, reasons) {\n        var _this = _super.call(this, message) || this;\n        _this.name = _this.constructor.name;\n        _this.reasons = reasons;\n        Error.captureStackTrace(_this, _this.constructor);\n        return _this;\n    }\n    return ValidationError;\n}(Error));\nexports.ValidationError = ValidationError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styles_1 = require(\"@material-ui/core/styles\");\nexports.default = (function (theme) {\n    var _a, _b, _c, _d;\n    return ({\n        appBar: {\n            zIndex: theme.zIndex.drawer + 1\n        },\n        root: {\n            display: 'flex',\n            alignItems: 'center',\n            width: '100%',\n            padding: theme.spacing(0, 1),\n            textShadow: '3px 3px 3px rgba(0,0,0,0.7)',\n            backgroundImage: \"url(\" + process.env.PUBLIC_URL + \"/HeaderBackground.png)\",\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: '0% 50%',\n            backgroundSize: 'cover',\n            backgroundColor: '#444444'\n        },\n        logo: {\n            height: 40,\n            width: 40,\n            marginRight: theme.spacing(2)\n        },\n        programChooser: {\n            margin: theme.spacing(0, 1),\n            color: theme.palette.primary.contrastText,\n            '& svg': {\n                color: theme.palette.primary.contrastText\n            },\n            '&:before': {\n                borderColor: theme.palette.primary.contrastText\n            },\n            '&:after': {\n                borderColor: theme.palette.primary.contrastText\n            }\n        },\n        transparent: {\n            backgroundColor: 'transparent',\n            background: 'none',\n            color: theme.palette.text.primary\n        },\n        search: (_a = {\n                position: 'relative',\n                borderRadius: theme.shape.borderRadius,\n                backgroundColor: styles_1.fade(theme.palette.common.white, 0.15),\n                '&:hover': {\n                    backgroundColor: styles_1.fade(theme.palette.common.white, 0.25)\n                },\n                marginRight: theme.spacing(2),\n                marginLeft: 0,\n                width: '100%',\n                flexGrow: 1\n            },\n            _a[theme.breakpoints.up('sm')] = {\n                marginLeft: theme.spacing(3),\n                width: 'auto'\n            },\n            _a),\n        searchIcon: {\n            width: theme.spacing(7),\n            height: '100%',\n            position: 'absolute',\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n        },\n        inputRoot: {\n            color: 'inherit'\n        },\n        spacer: {\n            flexGrow: 1\n        },\n        inputInput: (_b = {\n                padding: theme.spacing(1, 1, 1, 7),\n                transition: theme.transitions.create('width'),\n                width: '100%'\n            },\n            _b[theme.breakpoints.up('sm')] = {\n                width: 200\n            },\n            _b),\n        sectionDesktop: (_c = {\n                display: 'none'\n            },\n            _c[theme.breakpoints.up('sm')] = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _c),\n        sectionMobile: (_d = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _d[theme.breakpoints.up('sm')] = {\n                display: 'none'\n            },\n            _d)\n    });\n});\n//# sourceMappingURL=Topbar.style.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar Avatar_1 = __importDefault(require(\"@material-ui/core/Avatar\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar List_1 = __importDefault(require(\"@material-ui/core/List\"));\nvar Chip_1 = __importDefault(require(\"@material-ui/core/Chip\"));\nvar ListItem_1 = __importDefault(require(\"@material-ui/core/ListItem\"));\nvar ListItemText_1 = __importDefault(require(\"@material-ui/core/ListItemText\"));\nvar ListItemAvatar_1 = __importDefault(require(\"@material-ui/core/ListItemAvatar\"));\nvar Face_1 = __importDefault(require(\"@material-ui/icons/Face\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar constants_1 = require(\"../constants\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {},\n    accessChip: __assign({}, Object.keys(constants_1.accessColors).reduce(function (acc, ack) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[\"&.access_\" + ack] = {\n            color: theme.palette.getContrastText(constants_1.accessColors[ack][500]),\n            background: constants_1.accessColors[ack][500]\n        }, _a)));\n    }, {}))\n}); });\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar ProgramChooser = function (_a) {\n    var programs = _a.programs, history = _a.history, navigate = _a.navigate;\n    var classes = useStyles();\n    return (react_1.default.createElement(\"div\", { className: classes.rootContainer },\n        react_1.default.createElement(\"div\", { className: classes.spacer }),\n        react_1.default.createElement(Paper_1.default, { className: classes.root, elevation: 1 },\n            react_1.default.createElement(\"div\", { className: classes.logoContainer },\n                react_1.default.createElement(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" })),\n            react_1.default.createElement(Typography_1.default, { variant: \"h5\" }, \"Choose a program:\"),\n            react_1.default.createElement(List_1.default, null, programs &&\n                programs.map(function (p, idx) {\n                    var chip = (react_1.default.createElement(Chip_1.default, { icon: react_1.default.createElement(Face_1.default, null), className: clsx_1.default(classes.accessChip, \"access_\" + p.role), label: p.role || 'Observer', color: \"primary\" }));\n                    var disabled = isDisabled(p);\n                    if (disabled)\n                        chip = react_1.default.createElement(Chip_1.default, { label: \"No Access\", color: \"default\" });\n                    return (react_1.default.createElement(ListItem_1.default, { key: \"progKey-\" + idx, disabled: disabled, button: true, divider: true, onClick: function () { return navigate(history, p); } },\n                        react_1.default.createElement(ListItemAvatar_1.default, null,\n                            react_1.default.createElement(Avatar_1.default, { alt: \"programname\" }, p.name.substr(0, 1))),\n                        react_1.default.createElement(ListItemText_1.default, { primary: p.name, secondary: p.meta.description }),\n                        chip));\n                })),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"caption\" },\n                \"If there are programs labeled\",\n                ' ',\n                react_1.default.createElement(Chip_1.default, { label: \"No Access\", component: \"span\", color: \"default\", size: \"small\" }),\n                \" and you think you should be able to see them please contact your program administrator.\")),\n        react_1.default.createElement(\"div\", { className: classes.spacer })));\n};\nexports.default = ProgramChooser;\n//# sourceMappingURL=ProgramChooser.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar Link_1 = __importDefault(require(\"@material-ui/core/Link\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar ButtonGroup_1 = __importDefault(require(\"@material-ui/core/ButtonGroup\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Divider_1 = __importDefault(require(\"@material-ui/core/Divider\"));\nvar Close_1 = __importDefault(require(\"@material-ui/icons/Close\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Popover_1 = __importDefault(require(\"@material-ui/core/Popover\"));\nvar Share_1 = __importDefault(require(\"@material-ui/icons/Share\"));\nvar InsertDriveFile_1 = __importDefault(require(\"@material-ui/icons/InsertDriveFile\"));\nvar Photo_1 = __importDefault(require(\"@material-ui/icons/Photo\"));\nvar Terrain_1 = __importDefault(require(\"@material-ui/icons/Terrain\"));\nvar Assignment_1 = __importDefault(require(\"@material-ui/icons/Assignment\"));\nvar TreeView_1 = __importDefault(require(\"@material-ui/lab/TreeView\"));\nvar ExpandMore_1 = __importDefault(require(\"@material-ui/icons/ExpandMore\"));\nvar ChevronRight_1 = __importDefault(require(\"@material-ui/icons/ChevronRight\"));\nvar WarehouseTags_1 = __importDefault(require(\"../../misc/WarehouseTags\"));\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar filesize_1 = __importDefault(require(\"filesize\"));\nvar moment_1 = __importDefault(require(\"moment\"));\nvar WebRaveBtn_1 = __importDefault(require(\"../../misc/WebRaveBtn\"));\nvar DownloadZipBtn_1 = __importDefault(require(\"../../misc/DownloadZipBtn\"));\nvar ShareDialog_1 = __importDefault(require(\"../../modals/ShareDialog\"));\nvar RecurseTreeItem_1 = __importDefault(require(\"./RecurseTreeItem\"));\nvar ProjectModal_style_1 = __importDefault(require(\"./ProjectModal.style\"));\nvar useStyles = styles_1.makeStyles(ProjectModal_style_1.default);\nvar ProjectModal = function (_a) {\n    var onClose = _a.onClose, project = _a.project, downloadFile = _a.downloadFile, webRaveUrl = _a.webRaveUrl, program = _a.program, showFileTree = _a.showFileTree, pendingZips = _a.pendingZips, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var _b = react_1.useState(null), popOver = _b[0], setPopover = _b[1];\n    var _c = react_1.useState(false), shareOpen = _c[0], setShareOpen = _c[1];\n    var pendingSince = pendingZips[project.id];\n    var iconMapping = [\n        { pattern: /.*\\.(png|gif|jpg|jpeg)$/i, icon: react_1.default.createElement(Photo_1.default, { className: classes.photoIcon }), classStr: 'photo' },\n        { pattern: /.*\\.(tif|img|shp)$/i, icon: react_1.default.createElement(Terrain_1.default, { className: classes.TerrainIcon }), classStr: 'terrain' },\n        {\n            pattern: /.*\\.(csv|pdf|doc)$/i,\n            icon: react_1.default.createElement(Assignment_1.default, { className: classes.documentIcon }),\n            classStr: 'assignment'\n        }\n    ];\n    var files = (project.files || []).reduce(function (acc, file) {\n        var _a;\n        var found = iconMapping.find(function (_a) {\n            var pattern = _a.pattern;\n            return file.key.match(pattern);\n        });\n        return __assign(__assign({}, acc), (_a = {}, _a[file.key] = __assign(__assign({}, file), { icon: found ? found.icon : react_1.default.createElement(InsertDriveFile_1.default, { className: classes.normalIcon }), classStr: found ? found.classStr : 'normalIcon' }), _a));\n    }, {});\n    var fileTree = project.treeIzeFilePaths();\n    var pType = program.products.find(function (p) { return p.id === project.projType; });\n    var pTypeName = pType ? pType.name : 'Unknown';\n    var descriptionTag = Object.keys(project.meta).find(function (k) { return k.toLowerCase() === 'description'; });\n    return (react_1.default.createElement(Dialog_1.default, { onClose: onClose, open: true, maxWidth: \"md\", fullWidth: true, className: classes.root, classes: {\n            scrollPaper: classes.scrollPaper\n        } },\n        react_1.default.createElement(ShareDialog_1.default, { open: shareOpen, shareUrl: window.location.href, handleClose: function () { return setShareOpen(false); } }),\n        react_1.default.createElement(DialogTitle_1.default, { disableTypography: true, className: classes.titlebar },\n            react_1.default.createElement(\"div\", { className: classes.titlebarLeft },\n                react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(Typography_1.default, { variant: \"body1\" }, project.name) },\n                    react_1.default.createElement(Typography_1.default, { variant: \"h5\", component: \"div\", className: clsx_1.default(classes.name, classes.allowSelect) }, project.name)),\n                react_1.default.createElement(\"div\", { className: classes.subHeader },\n                    react_1.default.createElement(\"div\", { className: classes.flexGrow },\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", color: \"inherit\", component: \"div\" },\n                            \"ID: \",\n                            react_1.default.createElement(\"span\", { className: classes.allowSelect }, project.id))))),\n            onClose ? (react_1.default.createElement(\"div\", null,\n                react_1.default.createElement(IconButton_1.default, { \"aria-label\": \"close\", className: classes.closeButton, onClick: onClose, size: \"small\" },\n                    react_1.default.createElement(Close_1.default, null)))) : null),\n        react_1.default.createElement(DialogContent_1.default, { dividers: true },\n            react_1.default.createElement(\"div\", { className: clsx_1.default(classes.allowSelect) },\n                react_1.default.createElement(\"div\", { className: classes.header },\n                    react_1.default.createElement(\"div\", { className: classes.headerLeft },\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Project Type\"),\n                            \": \",\n                            react_1.default.createElement(\"strong\", null, pTypeName),\n                            \" (\",\n                            pType && pType.id,\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Created\"),\n                            \": \",\n                            moment_1.default(project.createdOn, 'x').fromNow(),\n                            \" (\",\n                            moment_1.default(project.createdOn, 'x').format('lll'),\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Updated\"),\n                            \": \",\n                            moment_1.default(project.updatedOn, 'x').fromNow(),\n                            \" (\",\n                            moment_1.default(project.updatedOn, 'x').format('lll'),\n                            \")\"),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Warehouse tags: \"),\n                            react_1.default.createElement(WarehouseTags_1.default, { tags: project.tags })),\n                        react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"inherit\" },\n                            react_1.default.createElement(\"strong\", null, \"Size (Unzipped)\"),\n                            \":\",\n                            ' ',\n                            project.totalSize && project.totalSize > -1\n                                ? filesize_1.default(project.totalSize)\n                                : 'Not available')),\n                    react_1.default.createElement(\"div\", { className: classes.headerRight },\n                        react_1.default.createElement(ButtonGroup_1.default, { color: \"primary\" },\n                            webRaveUrl && (react_1.default.createElement(WebRaveBtn_1.default, __assign({ title: \"Map\", url: webRaveUrl }, { project: project }, { btnProps: {\n                                    color: 'secondary',\n                                    variant: 'text'\n                                } }))),\n                            react_1.default.createElement(Button_1.default, { variant: \"text\", color: \"secondary\", onClick: function () { return setShareOpen(true); }, startIcon: react_1.default.createElement(Share_1.default, null) }, \"Share\"),\n                            react_1.default.createElement(DownloadZipBtn_1.default, __assign({ title: \"Download\" }, { project: project, pendingSince: pendingSince, downloadZipFile: downloadZipFile }, { btnProps: {\n                                    variant: 'text'\n                                } }))))),\n                descriptionTag && (react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", component: \"div\", variant: \"subtitle1\" }, \"Description\"),\n                    react_1.default.createElement(Typography_1.default, { color: \"textSecondary\", variant: \"body2\" }, project.meta[descriptionTag]))),\n                react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, \"Metadata\"),\n                react_1.default.createElement(Divider_1.default, null),\n                react_1.default.createElement(\"div\", { className: classes.metaDisplay }, Object.keys(project.meta)\n                    .filter(function (k) { return ['description'].indexOf(k.toLowerCase()) === -1; })\n                    .map(function (metaKey, idk) {\n                    var textComponent = project.meta[metaKey];\n                    if (project.meta[metaKey].indexOf('http') === 0) {\n                        textComponent = (react_1.default.createElement(Link_1.default, { href: project.meta[metaKey], target: \"_blank\" }, project.meta[metaKey]));\n                    }\n                    return (react_1.default.createElement(Tooltip_1.default, { key: \"result-\" + idk, placement: \"bottom\", title: react_1.default.createElement(react_1.default.Fragment, null,\n                            react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\" },\n                                react_1.default.createElement(\"strong\", null, metaKey)),\n                            react_1.default.createElement(Typography_1.default, { variant: \"body2\", component: \"div\" }, textComponent)) },\n                        react_1.default.createElement(\"div\", { className: classes.metaDisplayItem },\n                            react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"textPrimary\" },\n                                react_1.default.createElement(\"strong\", null, metaKey)),\n                            react_1.default.createElement(Typography_1.default, { variant: \"caption\", component: \"div\", color: \"textPrimary\" }, textComponent))));\n                }))),\n            showFileTree && (react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(Typography_1.default, { className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, \"Files\"),\n                react_1.default.createElement(Divider_1.default, null),\n                react_1.default.createElement(TreeView_1.default, { className: classes.treeRoot, defaultExpanded: ['1'], disableSelection: true, defaultCollapseIcon: react_1.default.createElement(ExpandMore_1.default, { color: \"inherit\" }), defaultExpandIcon: react_1.default.createElement(ChevronRight_1.default, { color: \"inherit\" }) }, fileTree.map(function (ft, idx) { return (react_1.default.createElement(RecurseTreeItem_1.default, { project: project, key: \"treeNode-\" + idx, keyStr: \"treeNode-\" + idx, item: ft, fileDict: files, fileClick: downloadFile })); }))))),\n        react_1.default.createElement(Popover_1.default, { open: Boolean(popOver), anchorEl: popOver ? popOver[0] : null, onClose: function () { return setPopover(null); }, anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'center'\n            }, transformOrigin: {\n                vertical: 'top',\n                horizontal: 'center'\n            } },\n            react_1.default.createElement(Typography_1.default, { className: classes.popOver }, popOver ? popOver[1] : ''))));\n};\nexports.default = ProjectModal;\n//# sourceMappingURL=ProjectModal.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar CloudDownload_1 = __importDefault(require(\"@material-ui/icons/CloudDownload\"));\nvar TreeItem_1 = __importDefault(require(\"@material-ui/lab/TreeItem\"));\nvar filesize_1 = __importDefault(require(\"filesize\"));\nvar RecurseTreeItem_style_1 = __importDefault(require(\"./RecurseTreeItem.style\"));\nvar useStyles = styles_1.makeStyles(RecurseTreeItem_style_1.default);\nvar RecurseTreeItem = function (_a) {\n    var item = _a.item, fileDict = _a.fileDict, keyStr = _a.keyStr, project = _a.project, fileClick = _a.fileClick;\n    var classes = useStyles();\n    if (item.children) {\n        var childNodes = item.children.map(function (c, idx) { return (react_1.default.createElement(RecurseTreeItem, { keyStr: keyStr + \"-l\" + idx, key: keyStr + \"-l\" + idx, item: c, fileDict: fileDict, project: project, fileClick: fileClick })); });\n        return (react_1.default.createElement(TreeItem_1.default, { nodeId: keyStr, className: classes.treeFolder, classes: {\n                content: classes.treeFolderContent\n            }, label: react_1.default.createElement(\"div\", { className: classes.treeFolderText }, item.name) }, childNodes));\n    }\n    else {\n        var lookup = item.path ? fileDict[item.path] : { size: '0' };\n        return (react_1.default.createElement(TreeItem_1.default, { nodeId: keyStr, className: classes.treeFile, classes: {\n                root: classes.treeItemRoot,\n                content: classes.treeFileContent\n            }, label: react_1.default.createElement(\"div\", { className: classes.treeItemContainer },\n                react_1.default.createElement(\"div\", { className: classes.treeItemText },\n                    react_1.default.createElement(Typography_1.default, { color: \"textPrimary\", component: \"div\", variant: \"body1\" }, item.name),\n                    react_1.default.createElement(Typography_1.default, { color: \"textSecondary\", component: \"div\", variant: \"caption\" },\n                        filesize_1.default(parseInt(lookup.size, 10)),\n                        \" --\",\n                        ' ',\n                        react_1.default.createElement(\"span\", { className: classes.allowSelect }, item.path))),\n                react_1.default.createElement(Tooltip_1.default, { title: react_1.default.createElement(react_1.default.Fragment, null,\n                        react_1.default.createElement(Typography_1.default, { variant: \"body1\" },\n                            \"Download: \",\n                            item.path)) },\n                    react_1.default.createElement(IconButton_1.default, { disableRipple: true, className: classes.treeItemIcon, color: \"primary\", onClick: function () { return fileClick(project, item.path); } },\n                        react_1.default.createElement(CloudDownload_1.default, null)))), endIcon: lookup.icon }));\n    }\n};\nexports.default = RecurseTreeItem;\n//# sourceMappingURL=RecurseTreeItem.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = (function (theme) { return ({\n    treeItemRoot: {\n        backgroundColor: theme.palette.background.paper,\n        '&:nth-child(odd)': {\n            backgroundColor: theme.palette.background.default\n        }\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        padding: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFile: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \" + theme.palette.grey[100]\n    },\n    treeFolder: {},\n    treeFolderContent: {},\n    treeFolderText: {\n        padding: theme.spacing(1)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    }\n}); });\n//# sourceMappingURL=RecurseTreeItem.style.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar colors_1 = require(\"@material-ui/core/colors\");\nexports.default = (function (theme) { return ({\n    root: {\n        margin: 0,\n        padding: theme.spacing(2)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    },\n    scrollPaper: {\n        alignItems: 'baseline'\n    },\n    name: {\n        maxWidth: '95%',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        marginBottom: theme.spacing(1)\n    },\n    titlebar: {\n        backgroundColor: '#444444',\n        color: theme.palette.primary.contrastText,\n        display: 'flex'\n    },\n    titlebarLeft: {\n        flexGrow: 1\n    },\n    header: {\n        display: 'flex'\n    },\n    headerLeft: {\n        flex: '1 1 80%'\n    },\n    headerRight: {\n        textAlign: 'right',\n        flex: '1 0'\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    closeButton: {\n        flex: '0 0',\n        color: theme.palette.grey[500]\n    },\n    normalIcon: {},\n    documentIcon: {\n        color: colors_1.red[500]\n    },\n    photoIcon: {\n        color: colors_1.purple[500]\n    },\n    TerrainIcon: {\n        color: colors_1.green[500]\n    },\n    metaDisplay: {\n        display: 'flex',\n        flexFlow: 'wrap'\n    },\n    title: {\n        marginTop: theme.spacing(2)\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \" + theme.palette.grey[100],\n        padding: theme.spacing(1)\n    },\n    treeFolder: {},\n    treeFolderContent: {\n        padding: theme.spacing(1)\n    },\n    metaDisplayItem: {\n        flex: '1 1',\n        borderRadius: theme.spacing(1),\n        backgroundColor: '#fafafa',\n        margin: theme.spacing(1, 0.5),\n        border: '#1px solid #e7e7e7',\n        padding: theme.spacing(1),\n        maxWidth: '25%',\n        minWidth: 150,\n        '&>*': {\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n        }\n    },\n    prodChip: {\n        marginLeft: theme.spacing(1),\n        backgroundColor: theme.palette.primary.light,\n        color: 'white'\n    },\n    popOver: {\n        padding: theme.spacing(2)\n    },\n    subHeader: {\n        width: '100%',\n        display: 'flex'\n    }\n}); });\n//# sourceMappingURL=ProjectModal.style.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar LockOpen_1 = __importDefault(require(\"@material-ui/icons/LockOpen\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {}\n}); });\nvar LoginScreen = function (_a) {\n    var signIn = _a.signIn;\n    var classes = useStyles();\n    return (react_1.default.createElement(\"div\", { className: classes.rootContainer },\n        react_1.default.createElement(\"div\", { className: classes.spacer }),\n        react_1.default.createElement(Paper_1.default, { className: classes.root },\n            react_1.default.createElement(\"div\", { className: classes.logoContainer },\n                react_1.default.createElement(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" })),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"body1\" }, \"Welcome to the Riverscapes Warehouse. Please click the button below to log in.\"),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"body1\" }, \"If you don't have an account you will be prompted to use your Google account or create a new account using another email address.\"),\n            react_1.default.createElement(Button_1.default, { variant: \"contained\", onClick: signIn, color: \"primary\", fullWidth: true, size: \"large\", startIcon: react_1.default.createElement(LockOpen_1.default, null) }, \"Sign In\")),\n        react_1.default.createElement(\"div\", { className: classes.spacer })));\n};\nexports.default = LoginScreen;\n//# sourceMappingURL=LoginScreen.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar Dialog_1 = __importDefault(require(\"@material-ui/core/Dialog\"));\nvar DialogTitle_1 = __importDefault(require(\"@material-ui/core/DialogTitle\"));\nvar DialogContent_1 = __importDefault(require(\"@material-ui/core/DialogContent\"));\nvar DialogActions_1 = __importDefault(require(\"@material-ui/core/DialogActions\"));\nvar Button_1 = __importDefault(require(\"@material-ui/core/Button\"));\nvar Error_1 = __importDefault(require(\"@material-ui/icons/Error\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1)\n    },\n    titlebar: {\n        display: 'flex',\n        background: theme.palette.error.main,\n        color: theme.palette.error.contrastText\n    },\n    closeButton: {},\n    name: {\n        paddingLeft: theme.spacing(1),\n        flexGrow: 1\n    }\n}); });\nvar ProjectModal = function (_a) {\n    var onClose = _a.onClose, program = _a.program;\n    var classes = useStyles();\n    return (react_1.default.createElement(Dialog_1.default, { onClose: onClose, open: true, maxWidth: \"xs\", fullWidth: true, className: classes.root, classes: {} },\n        react_1.default.createElement(DialogTitle_1.default, { disableTypography: true, className: classes.titlebar },\n            react_1.default.createElement(Error_1.default, { color: \"inherit\" }),\n            react_1.default.createElement(Typography_1.default, { className: classes.name }, \"Access Denied\")),\n        react_1.default.createElement(DialogContent_1.default, { dividers: true }, program ? (react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\", color: \"inherit\" },\n            \"You don't have access to the program \",\n            react_1.default.createElement(\"strong\", null, program.name),\n            \".\",\n            'If you arrived here via URL you will be able to use the URL ',\n            'again once you have access.')) : (react_1.default.createElement(Typography_1.default, { variant: \"body1\", component: \"div\", color: \"inherit\" }, 'This URL is not valid. If you arrived here via URL you will be able to use the URL again once you have access.'))),\n        react_1.default.createElement(DialogActions_1.default, null,\n            react_1.default.createElement(Button_1.default, { onClick: onClose, color: \"primary\" }, 'Back'))));\n};\nexports.default = ProjectModal;\n//# sourceMappingURL=NotAllowedModal.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar common_1 = require(\"@riverscapes/common\");\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar config_1 = require(\"../config\");\nvar useDownload = function (auth, program) {\n    var _a = react_1.useState({}), pendingZips = _a[0], setPendingZips = _a[1];\n    var pendingZipsRef = react_1.useRef();\n    pendingZipsRef.current = pendingZips;\n    var downloadFileFn = react_1.useCallback(function (project, fkey) { return __awaiter(void 0, void 0, void 0, function () {\n        var jwt, res, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!program)\n                        return [2, Promise.resolve()];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 4, , 5]);\n                    return [4, auth.getCurrentToken()];\n                case 2:\n                    jwt = _a.sent();\n                    return [4, common_1.downloadFile(config_1.endpoints.graphql, jwt, project.projType, program.machineName, project.id, fkey)];\n                case 3:\n                    res = _a.sent();\n                    try {\n                        if (res.data)\n                            window.open(res.data.downloadFile.downloadUrl, '_self');\n                    }\n                    catch (err) {\n                        loglevel_1.default.error('DOWNLOAD err', err);\n                    }\n                    return [3, 5];\n                case 4:\n                    error_1 = _a.sent();\n                    loglevel_1.default.error('DOWNLOAD err', error_1);\n                    return [3, 5];\n                case 5: return [2];\n            }\n        });\n    }); }, [program, auth]);\n    var downloadZipFile = react_1.useCallback(function (project) {\n        if (!program)\n            return Promise.resolve();\n        var checkZipFunc = function () {\n            return auth\n                .getCurrentToken()\n                .then(function (jwt) {\n                return common_1.downloadZipFile(config_1.endpoints.graphql, jwt, project.projType, program.machineName, project.id);\n            })\n                .then(function (res) {\n                var _a;\n                try {\n                    if (res.data && !res.data.downloadZip.pendingSince) {\n                        setPendingZips(lodash_1.default.pickBy(pendingZipsRef.current, function (val, key) { return key !== project.id; }));\n                        window.open(res.data.downloadZip.downloadUrl, '_self');\n                    }\n                    else {\n                        setPendingZips(__assign(__assign({}, pendingZipsRef.current), (_a = {}, _a[project.id] = res.data ? res.data.downloadZip.pendingSince : Date.now(), _a)));\n                        setTimeout(checkZipFunc, 5000);\n                    }\n                }\n                catch (err) {\n                    loglevel_1.default.error('DOWNLOAD err', err);\n                }\n            })\n                .catch(function (err) {\n                loglevel_1.default.error('DOWNLOAD err', err);\n            });\n        };\n        return checkZipFunc();\n    }, [program, auth]);\n    return {\n        pendingZips: pendingZipsRef.current,\n        downloadFileFn: downloadFileFn,\n        downloadZipFile: downloadZipFile\n    };\n};\nexports.default = useDownload;\n//# sourceMappingURL=useDownloads.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar config_1 = require(\"../config\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useProgram = function (match, programs, onProgramChange) {\n    var _a = react_1.useState(), program = _a[0], setProgram = _a[1];\n    var currProgramRef = react_1.useRef();\n    currProgramRef.current = program;\n    react_1.useEffect(function () {\n        if (!match || !programs || !match.params || !match.params.program)\n            return;\n        try {\n            var newProg = programs === null || programs === void 0 ? void 0 : programs.find(function (p) { return p.machineName === match.params.program; });\n            if (newProg && (!currProgramRef.current || currProgramRef.current.machineName !== newProg.machineName)) {\n                newProg.collections = newProg.collections.map(function (c, idx) { return (__assign(__assign({}, c), { color: config_1.mandatoryMetaColors[idx % config_1.mandatoryMetaColors.length] })); });\n                currProgramRef.current = newProg;\n                loglevel_1.default.debug('useProgram', { match: match, newProg: newProg, programs: programs });\n                setProgram(newProg);\n                if (onProgramChange)\n                    onProgramChange(newProg);\n            }\n        }\n        catch (_a) {\n            return;\n        }\n    }, [match, programs, onProgramChange]);\n    return program;\n};\nexports.default = useProgram;\n//# sourceMappingURL=useProgram.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar common_1 = require(\"@riverscapes/common\");\nvar config_1 = require(\"../config\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useProject = function (auth, match, program, files, tree) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    var _a = react_1.useState({ loading: false }), projState = _a[0], setProjState = _a[1];\n    var currProjectStateRef = react_1.useRef();\n    currProjectStateRef.current = projState;\n    react_1.useEffect(function () {\n        if (!match || !match.params)\n            return;\n        if (!match.params.project) {\n            setProjState({ loading: false });\n        }\n        try {\n            if (!program || !match || !match.params || !match.params.project || match.params.project.length < 10)\n                return;\n            var progMachineName_1 = program.machineName;\n            var done_1 = false;\n            setTimeout(function () {\n                if (!done_1)\n                    setProjState(__assign(__assign({}, currProjectStateRef.current), { loading: true }));\n            }, 500);\n            auth.getCurrentToken()\n                .then(function (jwt) { return common_1.getProject(config_1.endpoints.graphql, jwt, match.params.project, progMachineName_1, files, tree); })\n                .then(function (res) {\n                var _a;\n                done_1 = true;\n                loglevel_1.default.debug('getProjectById::Response', res);\n                if (res.data &&\n                    currProjectStateRef.current &&\n                    currProjectStateRef.current.project &&\n                    ((_a = currProjectStateRef.current) === null || _a === void 0 ? void 0 : _a.project.id) === res.data.project.id) {\n                    return;\n                }\n                else if (res.data) {\n                    setProjState({ project: res.data.project, loading: false });\n                }\n                else {\n                    setProjState({ project: undefined, loading: false });\n                }\n            })\n                .catch(function (err) {\n                done_1 = true;\n                setProjState({ project: undefined, loading: false });\n                loglevel_1.default.error('api.getProjectById error', err);\n            });\n        }\n        catch (_a) {\n            return;\n        }\n    }, [match, program, auth]);\n    return projState;\n};\nexports.default = useProject;\n//# sourceMappingURL=useProject.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar lodash_1 = require(\"lodash\");\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar useQueryParams = function () {\n    var _a = react_1.useState(), query = _a[0], setQuery = _a[1];\n    var history = react_router_dom_1.useHistory();\n    var _b = react_router_dom_1.useParams(), project = _b.project, program = _b.program, params = __rest(_b, [\"project\", \"program\"]);\n    react_1.useEffect(function () {\n        if (!query) {\n            var newQuery_1 = {};\n            Object.keys(params).forEach(function (pkey) {\n                newQuery_1[pkey] = JSON.parse(decodeURIComponent(params[pkey]));\n            });\n            if (!lodash_1.isEqual(query, newQuery_1)) {\n                loglevel_1.default.warn('MARZIPAN::FIRST TIME', { newQuery: newQuery_1, query: query, project: project, program: program });\n                setQuery(newQuery_1);\n            }\n        }\n        else {\n            var newParams_1 = new URLSearchParams();\n            Object.keys(query).forEach(function (qkey) {\n                newParams_1.append(qkey, encodeURIComponent(JSON.stringify(query[qkey])));\n            });\n            if (!lodash_1.isEqual(__assign({}, newParams_1), __assign({}, params))) {\n                loglevel_1.default.warn('MARZIPAN::QUERY SET', JSON.stringify({ query: query, params: params, isEqual: lodash_1.isEqual(newParams_1, params) }));\n                history.push({ search: newParams_1.toString() });\n            }\n        }\n    }, [query, history, params]);\n    return {\n        query: query,\n        setQuery: setQuery\n    };\n};\nexports.default = useQueryParams;\n//# sourceMappingURL=useQueryParams.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nvar home = {\n    palette: {\n        primary: {\n            main: colors_1.indigo[500]\n        },\n        secondary: {\n            main: colors_1.orange[600],\n            contrastText: '#FFFFFF'\n        },\n        text: {}\n    }\n};\nvar homeDark = __assign(__assign({}, home), { palette: __assign(__assign({}, home.palette), { type: 'dark' }) });\nexports.default = {\n    home: styles_1.createMuiTheme(home),\n    homeDark: styles_1.createMuiTheme(homeDark)\n};\n//# sourceMappingURL=themes.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar createSvgIcon_1 = __importDefault(require(\"@material-ui/icons/utils/createSvgIcon\"));\nexports.default = createSvgIcon_1.default(react_1.default.createElement(react_1.default.Fragment, null,\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"5.5\", cy: \"5.5\", r: \"2.5\" }),\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"5.5\", cy: \"18.5\", r: \"2.5\" }),\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"12\", cy: \"12\", r: \"2.5\" }),\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"18.5\", cy: \"10\", r: \"2.5\" }),\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"17.5\", cy: \"16.5\", r: \"2.5\" })), 'Multidot');\n//# sourceMappingURL=Multidot.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar createSvgIcon_1 = __importDefault(require(\"@material-ui/icons/utils/createSvgIcon\"));\nexports.default = createSvgIcon_1.default(react_1.default.createElement(react_1.default.Fragment, null,\n    react_1.default.createElement(\"path\", { d: \" M 5.932 4.519 C 5.976 4.353 6 4.179 6 4 C 6 2.896 5.104 2 4 2 C 2.896 2 2 2.896 2 4 L 2 4 L 2 4 L 2 4 L 2 4 C 2 4.74 2.402 5.386 3 5.732 L 3 18.268 C 2.402 18.614 2 19.26 2 20 L 2 20 L 2 20 L 2 20 L 2 20 C 2 21.104 2.896 22 4 22 C 4.74 22 5.386 21.598 5.732 21 L 18.268 21 L 18.268 21 C 18.614 21.598 19.26 22 20 22 C 21.104 22 22 21.104 22 20 C 22 19.26 21.598 18.614 21 18.268 L 21 9.732 L 21 9.732 C 21.598 9.386 22 8.74 22 8 C 22 6.896 21.104 6 20 6 C 18.937 6 18.067 6.831 18.004 7.878 L 13.1 10.33 C 12.784 10.121 12.406 10 12 10 C 11.822 10 11.65 10.023 11.486 10.067 L 5.932 4.519 Z  M 5 18.268 C 5.303 18.444 5.556 18.697 5.732 19 L 18.268 19 C 18.444 18.697 18.697 18.444 19 18.268 L 19 9.732 C 18.966 9.712 18.933 9.692 18.9 9.67 L 13.996 12.122 C 13.933 13.169 13.063 14 12 14 C 10.896 14 10 13.104 10 12 L 10 12 C 10 11.822 10.023 11.649 10.067 11.485 L 5 6.41 L 5 18.268 Z \", fillRule: \"evenodd\" })), 'Polygon');\n//# sourceMappingURL=Polygon.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar createSvgIcon_1 = __importDefault(require(\"@material-ui/icons/utils/createSvgIcon\"));\nexports.default = createSvgIcon_1.default(react_1.default.createElement(react_1.default.Fragment, null,\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"4\", cy: \"13\", r: \"2\" }),\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"12\", cy: \"9\", r: \"2\" }),\n    react_1.default.createElement(\"circle\", { vectorEffect: \"non-scaling-stroke\", cx: \"20\", cy: \"13\", r: \"2\" }),\n    react_1.default.createElement(\"path\", { d: \" M 4.45 13.89 L 3.55 14.34 L 2.66 12.55 L 3.55 12.11 L 12 7.88 L 20.45 12.11 L 21.34 12.55 L 20.45 14.34 L 19.55 13.89 L 12 10.12 L 4.45 13.89 Z \" })), 'Polyline');\n//# sourceMappingURL=Polyline.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar createSvgIcon_1 = __importDefault(require(\"@material-ui/icons/utils/createSvgIcon\"));\nexports.default = createSvgIcon_1.default(react_1.default.createElement(react_1.default.Fragment, null,\n    react_1.default.createElement(\"path\", { d: \"M22,2l0,20l-20,0l0,-20l20,0Zm-2,2l-16,0l0,16l16,0l0,-16Z\" }),\n    react_1.default.createElement(\"rect\", { x: \"5\", y: \"5\", width: \"4\", height: \"4\" }),\n    react_1.default.createElement(\"rect\", { x: \"15\", y: \"5\", width: \"4\", height: \"4\" }),\n    react_1.default.createElement(\"rect\", { x: \"5\", y: \"15\", width: \"4\", height: \"4\" }),\n    react_1.default.createElement(\"rect\", { x: \"10\", y: \"10\", width: \"1\", height: \"5\" }),\n    react_1.default.createElement(\"rect\", { x: \"11\", y: \"10\", width: \"6\", height: \"2\" }),\n    react_1.default.createElement(\"rect\", { x: \"11\", y: \"12\", width: \"2\", height: \"2\" }),\n    react_1.default.createElement(\"rect\", { x: \"13\", y: \"7\", width: \"1\", height: \"2\" }),\n    react_1.default.createElement(\"rect\", { x: \"14\", y: \"9\", width: \"1\", height: \"1\" }),\n    react_1.default.createElement(\"rect\", { x: \"8\", y: \"10\", width: \"1\", height: \"4\" }),\n    react_1.default.createElement(\"rect\", { x: \"7\", y: \"11\", width: \"1\", height: \"3\" }),\n    react_1.default.createElement(\"rect\", { x: \"9\", y: \"11\", width: \"1\", height: \"1\" }),\n    react_1.default.createElement(\"rect\", { x: \"10\", y: \"6\", width: \"2\", height: \"3\" }),\n    react_1.default.createElement(\"rect\", { x: \"12\", y: \"7\", width: \"1\", height: \"1\" }),\n    react_1.default.createElement(\"rect\", { x: \"15\", y: \"14\", width: \"2\", height: \"4\" }),\n    react_1.default.createElement(\"rect\", { x: \"14\", y: \"14\", width: \"1\", height: \"1\" }),\n    react_1.default.createElement(\"rect\", { x: \"17\", y: \"15\", width: \"2\", height: \"2\" }),\n    react_1.default.createElement(\"rect\", { x: \"11\", y: \"16\", width: \"1\", height: \"3\" }),\n    react_1.default.createElement(\"rect\", { x: \"12\", y: \"15\", width: \"2\", height: \"2\" }),\n    react_1.default.createElement(\"rect\", { x: \"10\", y: \"18\", width: \"1\", height: \"1\" })), 'QRCode');\n//# sourceMappingURL=QRCode.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar createSvgIcon_1 = __importDefault(require(\"@material-ui/icons/utils/createSvgIcon\"));\nexports.default = createSvgIcon_1.default(react_1.default.createElement(react_1.default.Fragment, null,\n    react_1.default.createElement(\"g\", null,\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,-1.77636e-15,3.97768)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" })),\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,0,11.9777)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" })),\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,8,4)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" })),\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,8,12)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" })),\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,4,-0.0223232)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" })),\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,4,7.97768)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" })),\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,12,0)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" })),\n        react_1.default.createElement(\"g\", { transform: \"matrix(1,0,0,1,12,8)\" },\n            react_1.default.createElement(\"rect\", { x: \"4\", y: \"4.022\", width: \"4\", height: \"3.978\" }))),\n    react_1.default.createElement(\"g\", { id: \"Raster\" },\n        react_1.default.createElement(\"path\", { d: \"M21,5.432C21,4.09 19.91,3 18.568,3L5.432,3C4.09,3 3,4.09 3,5.432L3,18.568C3,19.91 4.09,21 5.432,21L18.568,21C19.91,21 21,19.91 21,18.568L21,5.432Z\", style: { fillOpacity: 0 } }),\n        react_1.default.createElement(\"path\", { d: \"M22,5.432C22,3.538 20.462,2 18.568,2L5.432,2C3.538,2 2,3.538 2,5.432L2,18.568C2,20.462 3.538,22 5.432,22L18.568,22C20.462,22 22,20.462 22,18.568L22,5.432ZM20,5.432L20,18.568C20,19.358 19.358,20 18.568,20C18.568,20 5.432,20 5.432,20C4.642,20 4,19.358 4,18.568C4,18.568 4,5.432 4,5.432C4,4.642 4.642,4 5.432,4C5.432,4 18.568,4 18.568,4C19.358,4 20,4.642 20,5.432Z\" }))), 'Multidot');\n//# sourceMappingURL=Raster.js.map","import React, { useMemo } from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { Program } from '@riverscapes/common'\nimport { Topbar, themes, useProgram } from '@riverscapes/react-common'\nimport { AppFrame } from '@northarrowresearch/react-common'\nimport { History, Match, useHistory } from 'react-router-dom'\nimport { ContainerProps } from '@material-ui/core/Container'\nimport log from 'loglevel'\n\ninterface Props {\n    title: string\n    children: React.ReactChild | React.ReactChildren | React.ReactElement\n    programs?: Program[]\n    history?: History\n    match?: Match\n    containerProps?: Partial<ContainerProps>\n    signOut?: () => Promise<void>\n}\n\nconst AppWrapper: React.FC<Props> = ({ title, children, match, history, programs, signOut, containerProps }: Props) => {\n    const program = useProgram(match, programs)\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll\n                fullWidth\n                topbar={\n                    <Topbar history={history} title={title} signOutHandler={signOut} shareUrl={window.location.href} />\n                }\n                // footer={<Footer version={config.version as string} />}\n            >\n                <>{children}</>\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\nexport default AppWrapper\n\nexport const CosmosAppWrapper: React.FC<Props> = ({ children, programs, containerProps }: Props) => {\n    const signOut = (): Promise<void> => Promise.resolve(log.info('logging out'))\n    const history = useHistory()\n    const program = useMemo(() => {\n        try {\n            return programs ? programs[0] : null\n        } catch {\n            return null\n        }\n    }, [programs])\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll\n                fullWidth\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        program={program as Program}\n                    />\n                }\n            >\n                {children}\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\n","import Satellite from './SatStreets.json'\n// import Satellite from './Satellite.json'\nimport BasicMap from './BasicMap.json'\n// import TopoMap from './TopoMap.json'\nimport GrayscaleHS from './GrayscaleHS.json'\nimport { BaseLayer } from '../types'\n\nimport {\n    // Satellite as SatIcon,\n    SatelliteOutlined,\n    // Terrain,\n    // DirectionsCar,\n    DirectionsCarOutlined,\n    TerrainOutlined\n} from '@material-ui/icons'\n\nconst mapStyles: BaseLayer[] = [\n    {\n        id: 'SATELLITE',\n        title: 'Satellite Imagery',\n        toolTip: 'Satellite Imagery',\n        Icon: SatelliteOutlined,\n        color: 'green',\n        style: Satellite\n    },\n    {\n        id: 'STREET',\n        title: 'Street Map',\n        toolTip: 'Street Map',\n        Icon: DirectionsCarOutlined,\n        color: 'blue',\n        style: BasicMap\n    },\n    {\n        id: 'HILLSHADE',\n        title: 'Hillshade',\n        toolTip: 'Hillshade',\n        Icon: TerrainOutlined,\n        color: 'blue',\n        style: GrayscaleHS\n    }\n]\n\nexport default mapStyles\n","import { red, green, blue, orange, purple, cyan, lime, brown } from '@material-ui/core/colors'\nimport { Color } from '@material-ui/core'\nimport log from 'loglevel'\n\nlet domain = process.env.REACT_APP_DOMAIN\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n    domain = 'localhost'\n    // basename = ''\n}\nlog.debug('config: ', { domain })\nexport const isDev = process.env.NODE_ENV && process.env.NODE_ENV === 'development'\nexport const version = process.env.REACT_APP_VERSION\n\nexport const endpoints = {\n    graphql: `${process.env.REACT_APP_GRAPHQL}`\n}\n\nexport const warehouseIconUrl = process.env.PUBLIC_URL + '/RiverscapesLogo.png'\nexport const warehouseUrl = process.env.REACT_APP_WAREHOUSE_URL\nexport const appName = 'Riverscapes Project Viewer (webRAVE)'\nexport const appDefaults = {}\n\nexport const mandatoryMetaColors: Color[] = [red, green, blue, orange, purple, cyan, lime, brown]\nexport const legendColors: Color[] = [red, green, blue, orange, purple, cyan, lime, brown]\nexport const redirectUrl = new URL(\n    process.env.PUBLIC_URL.endsWith('/') ? process.env.PUBLIC_URL : process.env.PUBLIC_URL + '/',\n    window.location.origin\n)\n\nconsole.log('RedirectUrl', { redirectUrl, publicUrl: process.env.PUBLIC_URL })\n","import { useState, useEffect } from 'react'\nimport { grey } from '@material-ui/core/colors'\nimport { Color } from '@material-ui/core'\nimport { Project, ProjectTreeView, ProjectTreeLeaf, ProjectTreeLayerTypes, TileService } from '@riverscapes/common'\nimport { MapLayer } from '../types'\nimport { legendColors } from '../config'\nimport { random, isEqual } from 'lodash'\n\nconst SORT_ORDER = [\n    ProjectTreeLayerTypes.point,\n    ProjectTreeLayerTypes.line,\n    ProjectTreeLayerTypes.polygon,\n    ProjectTreeLayerTypes.tin,\n    ProjectTreeLayerTypes.raster\n]\n\nexport interface UseMapLayersInterface {\n    layersError: string\n    currView: string\n    layers: MapLayer[]\n    // setLayers: (val: ProjectTreeLeaf[]) => void\n    addLayer: (val: ProjectTreeLeaf) => void\n    removeLayer: (val: ProjectTreeLeaf) => void\n    changeView: (val: string) => void\n}\n\nlet LEGEND_COLORS: Color[] = []\n\n// Get a random color. Try not to reuse colors if possible\nexport function getColor(): Color {\n    if (LEGEND_COLORS.length === 0) {\n        LEGEND_COLORS = [...legendColors]\n    }\n    const idx = random(0, LEGEND_COLORS.length - 1)\n    const color = LEGEND_COLORS[idx]\n    LEGEND_COLORS = LEGEND_COLORS.filter((c, idy) => idy !== idx)\n    return color\n}\n\nconst useMapLayers = (project: Project, tiles: Record<string, TileService>): UseMapLayersInterface => {\n    const [layersError, setError] = useState<string>('')\n    const [currView, setViewId] = useState<string>((project && project.tree.defaultView) || 'custom')\n    const [layers, _setLayers] = useState<MapLayer[]>([])\n\n    /**\n     * Function to set the layers, sorting them on the way in\n     */\n\n    const setLayers = (newLeaves: ProjectTreeLeaf[]) => {\n        if (!project) return\n        const sortedLeaves = [...newLeaves]\n        sortedLeaves.sort((leafA, leafB) => {\n            // First we sort by the layer type\n            if (leafA.layerType !== leafB.layerType)\n                return SORT_ORDER.indexOf(leafA.layerType) - SORT_ORDER.indexOf(leafB.layerType)\n            // Then we sort by the order in the XML\n            else return project.tree.leaves.indexOf(leafA) - project.tree.leaves.indexOf(leafB)\n        })\n        const sortedLayers: MapLayer[] = sortedLeaves.map((leaf) => {\n            const existingLyr = layers.find((lyr) => lyr.leaf === leaf)\n            let color: Color\n            if (leaf.layerType !== ProjectTreeLayerTypes.raster) {\n                color = existingLyr ? existingLyr.legend.color : getColor()\n            } else {\n                color = grey\n            }\n            return {\n                leaf,\n                tiles: leaf.url ? tiles[leaf.url] : undefined,\n                // TODO: this is a placeholder for proper symbology (coming soon)\n                legend: { color }\n            }\n        })\n        if (!isEqual(layers, sortedLayers)) _setLayers(sortedLayers)\n    }\n\n    // When the project or view changes we need to rebuild the layers array\n    useEffect((): void => {\n        if (!project) return\n        const view: ProjectTreeView | undefined = project.tree.views?.find(({ id }) => currView === id)\n        if (!view) return\n        const vLeaves: ProjectTreeLeaf[] = view.layers\n            .map((vlyr) => {\n                return project.tree.leaves.find(({ blLayerId }) => blLayerId && blLayerId === vlyr.id)\n            })\n            .filter((lyr) => lyr) as ProjectTreeLeaf[]\n        setLayers(vLeaves)\n    }, [project, currView, Object.values(tiles).map(({ status }) => status)])\n\n    // Add layer to the map\n    const addLayer = (val: ProjectTreeLeaf) => {\n        if (!layers.find((lyr) => lyr.leaf === val)) {\n            if (layers.length === 5) {\n                setError('This map supports a maximum of 5 layers')\n                return\n            }\n            const newLeaves: ProjectTreeLeaf[] = [...layers.map(({ leaf }) => leaf), val]\n            setLayers(newLeaves)\n            setViewId('custom')\n            setError('')\n        }\n    }\n\n    // Remove a layer from the map\n    const removeLayer = (val: ProjectTreeLeaf) => {\n        if (layers.find((lyr) => lyr.leaf === val)) {\n            setLayers(layers.filter((lyr) => lyr.leaf !== val).map(({ leaf }) => leaf))\n            setViewId('custom')\n            setError('')\n        }\n    }\n\n    // Change the view dropdown to something else\n    const changeView = (val: string) => {\n        if (val && val === 'custom') setLayers([])\n        setViewId(val)\n        setError('')\n    }\n\n    return {\n        currView,\n        layersError,\n        layers,\n        // setLayers,\n        addLayer,\n        removeLayer,\n        changeView\n    }\n}\n\nexport default useMapLayers\n","import { useState, useEffect, useRef } from 'react'\nimport {\n    ProjectTreeLeaf,\n    TileIndexJSON,\n    TileService,\n    ProjectTreeLayerTileTypes,\n    TilingStatus\n} from '@riverscapes/common'\nimport Bottleneck from 'bottleneck'\nimport RaveProjectTree from '../lib/RaveProjectTree'\nimport log from 'loglevel'\n\nconst RETRIES_ALLOWED = 5\nconst QUEUE = new Bottleneck({\n    maxConcurrent: 1\n})\n\ninterface UseTileLayersInterface {\n    tiles: Record<string, TileService>\n    bounds?: [minx: number, miny: number, maxx: number, maxy: number]\n    zoomBounds: [minZoom: number, maxZoom: number]\n}\n\nconst InitState: UseTileLayersInterface = {\n    tiles: {},\n    zoomBounds: [4, 18]\n}\n\nexport function getNewZoomBounds(\n    oldBounds: [minZoom: number, maxZoom: number],\n    minZoom?: number,\n    maxZoom?: number\n): [minZoom: number, maxZoom: number] {\n    // const newMin = !maxZoom ? oldBounds[0] : Math.min(oldBounds[0], minZoom as number)\n    const newMax = !maxZoom ? oldBounds[1] : Math.max(oldBounds[1], maxZoom as number)\n    return [oldBounds[0], newMax]\n}\n\nexport function newBounds(\n    globalBounds?: [number, number, number, number],\n    newRect?: [number, number, number, number]\n): [number, number, number, number] | undefined {\n    if (!newRect && !globalBounds) return undefined\n    else if (newRect && !globalBounds) return newRect\n    else if (globalBounds && !newRect) return globalBounds\n    else if (globalBounds && newRect) {\n        return [\n            Math.min(newRect[0], globalBounds[0]),\n            Math.min(newRect[1], globalBounds[1]),\n            Math.max(newRect[2], globalBounds[2]),\n            Math.max(newRect[3], globalBounds[3])\n        ]\n    }\n    return undefined\n}\n\nconst useTileLayers = (tree: RaveProjectTree): UseTileLayersInterface => {\n    const [state, setState] = useState<UseTileLayersInterface>(InitState)\n    const stateRef = useRef<UseTileLayersInterface>()\n    stateRef.current = state\n\n    const updateTileService = (tile: TileService) => {\n        const oldState: UseTileLayersInterface = stateRef.current || InitState\n        setState({\n            ...oldState,\n            zoomBounds: getNewZoomBounds(oldState.zoomBounds, tile.tileJSON?.minZoom, tile.tileJSON?.maxZoom),\n            bounds: newBounds(oldState.bounds, tile.tileJSON?.bounds),\n            tiles: {\n                ...oldState.tiles,\n                [tile.url]: tile\n            }\n        })\n    }\n\n    useEffect(() => {\n        const viewLayers = tree.viewLayers()\n        const newTiles: Record<string, TileService> = tree.project.tree.leaves\n            // Filter out anything we can't look up\n            .filter(\n                ({ layerType, url, nodeExists }) =>\n                    ProjectTreeLayerTileTypes.indexOf(layerType) > -1 && nodeExists && url && url.length > 0\n            )\n            .reduce((acc, ptLeaf) => {\n                const newUrl = ptLeaf.url + (ptLeaf.url?.slice(-1) === '/' ? '' : '/') + 'index.json'\n                return {\n                    ...acc,\n                    // There will be some clobbering here but that's ok to remove duplicates\n                    [ptLeaf.url as string]: {\n                        url: ptLeaf.url,\n                        indexUrl: newUrl,\n                        status: TilingStatus.UNKNOWN,\n                        priority: getPriority(ptLeaf, viewLayers, tree.defaultView),\n                        retry: 0,\n                        tileJSON: null\n                    }\n                }\n            }, {})\n        // We do an initial set before getting any of the JSON files\n        const oldState: UseTileLayersInterface = stateRef.current || InitState\n        setState({ ...oldState, tiles: newTiles })\n        Promise.all(\n            Object.keys(newTiles).map((nt, idx) =>\n                QUEUE.schedule({ priority: newTiles[nt].priority }, () =>\n                    layerFetchPromise(newTiles[nt], idx, updateTileService)\n                )\n            )\n        )\n    }, [tree])\n    // For populating the cosmos mock json\n    // console.log(JSON.stringify(state.tiles))\n    return state\n}\n\nexport default useTileLayers\n\n/**\n * layerFetchPromise\n * @param ts\n * @param idx\n * @param updateLayer\n * @returns\n */\nasync function layerFetchPromise(\n    ts: TileService,\n    idx: number,\n    updateTileService: (ts: TileService) => void\n): Promise<void> {\n    const updatedTs: TileService = await fetch(ts.indexUrl)\n        .then((response) => response.json())\n        .then((data: TileIndexJSON) => ({ ...ts, error: data.error, status: data.status, tileJSON: data }))\n        .catch((e) => {\n            log.error(e)\n            const newTs: TileService = { ...ts, retry: ts.retry + 1, error: 'Tiles for this layer could not be found' }\n            // This must be a network error. Log it and try again up to n times\n            if (newTs.retry < RETRIES_ALLOWED) {\n                QUEUE.schedule({ priority: newTs.priority }, () => layerFetchPromise(newTs, idx, updateTileService))\n            }\n            return newTs\n        })\n    updateTileService(updatedTs)\n    // We always resolve the promise\n    return Promise.resolve()\n}\n\n// A priority between 0 and 9. A job with a priority of 4 will be queued ahead of a job with a priority of 5.\n// Important: You must set a low maxConcurrent value for priorities to work, otherwise there is nothing to\n// queue because jobs will be be scheduled immediately!\nfunction getPriority(\n    ptLeaf: ProjectTreeLeaf,\n    viewLayers: Record<string, ProjectTreeLeaf[]>,\n    defaultViewId: string | null\n): number {\n    try {\n        const foundId = Object.keys(viewLayers).find((vlkey) => viewLayers[vlkey].indexOf(ptLeaf) > -1)\n        if (foundId && foundId === defaultViewId) return 0\n        else if (foundId) return 1\n        else return 2\n    } catch {\n        // Fail gracefully\n        return 3\n    }\n}\n","import { RaveTreeBranch } from '../types'\nimport { Project, ProjectTreeLeaf, ProjectTreeBranch, ProjectTreeView } from '@riverscapes/common'\nimport { RaveProjectTreeInterface } from '../types'\n\n// import log from 'loglevel'\n\nclass RaveProjectTree implements RaveProjectTreeInterface {\n    readonly project: Project\n    readonly defaultView: string | null\n    readonly views: ProjectTreeView[]\n    readonly tree: RaveTreeBranch\n    readonly leafLookup: Record<string, ProjectTreeLeaf>\n\n    constructor(project: Project) {\n        this.project = project\n        this.defaultView = project.tree.defaultView || null\n        this.views = project.tree.views || []\n        this.leafLookup = {}\n        const rootBranch = project.tree.branches.find((b) => b.pid === -1)\n        if (!rootBranch) throw new Error('Could not find root branch')\n        this.tree = this.buildTreeRecursive(rootBranch)\n    }\n\n    /**\n     * Fault tolerant recursive tree search algorithm\n     * @param path\n     * @param branch\n     * @returns\n     */\n    findLeafByPath = (path: number[], branch = this.tree): ProjectTreeLeaf | null => {\n        // We're at the last element. See if there's a leaf here\n        if (path.length === 0) return null\n        const newPath = [...path]\n        const currChoice = newPath.shift() as number\n        if (path.length === 1 && branch.leaves.length > currChoice) return branch.leaves[currChoice]\n        else if (path.length > 1 && branch.subBranches.length > path[path.length - 1]) {\n            return this.findLeafByPath(newPath, branch.subBranches[currChoice])\n        }\n        return null\n    }\n\n    viewLayers = (): Record<string, ProjectTreeLeaf[]> => {\n        return this.views.reduce((acc, { id }) => ({ ...acc, [id]: this.getLayersByView(id) }), {})\n    }\n\n    getLayersByView = (viewId?: string): ProjectTreeLeaf[] | null => {\n        const lookupViewId = viewId || this.defaultView\n        if (!lookupViewId || lookupViewId.length === 0) return null\n        const view: ProjectTreeView | undefined = this.views.find(({ id }) => lookupViewId === id)\n        if (!view) return null\n\n        return view.layers\n            .map((vlyr) => this.project.tree.leaves.find(({ layerId }) => layerId && layerId === vlyr.id))\n            .filter((lyr) => lyr) as ProjectTreeLeaf[]\n    }\n\n    getDefaultExpandedLayers = (): ProjectTreeBranch[] =>\n        this.project.tree.branches.filter(({ collapsed }) => collapsed !== true)\n\n    filterTreeByTextRecursive = (\n        reqSearch: string,\n        minSearchLength: number,\n        raveTreeBranch = this.tree\n    ): RaveTreeBranch => ({\n        ...raveTreeBranch,\n        leaves: raveTreeBranch.leaves.map((leaf) => ({\n            ...leaf,\n            hidden: Boolean(\n                reqSearch &&\n                    reqSearch.length > minSearchLength &&\n                    // If the branch matches the search OR the leaf label matches the search then show it\n                    raveTreeBranch.treeBranch.label.toLowerCase().indexOf(reqSearch as string) < 0 &&\n                    leaf.label.toLowerCase().indexOf(reqSearch as string) < 0\n            )\n        })),\n        subBranches: raveTreeBranch.subBranches.map((sb) => ({\n            // Recursion\n            ...this.filterTreeByTextRecursive(reqSearch, minSearchLength, sb),\n            treeBranch: {\n                ...sb.treeBranch,\n                hidden: Boolean(\n                    reqSearch && reqSearch.length > minSearchLength && sb.searchText.indexOf(reqSearch as string) < 0\n                )\n            }\n        }))\n    })\n\n    /**\n     * Recursive tree builder\n     * @param treeBranch\n     * @param reqSearch\n     * @returns\n     */\n    buildTreeRecursive = (treeBranch: ProjectTreeBranch, path: number[] = []): RaveTreeBranch => {\n        const subBranches = this.project.tree.branches\n            .filter(({ pid }) => pid === treeBranch.bid)\n            .map((tb, idx) => this.buildTreeRecursive(tb, [...path, idx]))\n            .filter(({ subBranches: sb, leaves: lv }) => sb.length > 0 || lv.length > 0)\n        const leaves = this.project.tree.leaves.filter(\n            ({ pid, label }) => pid === treeBranch.bid && label !== 'Layer missing'\n        )\n        leaves.forEach((leaf, idx) => {\n            const leafPath = [...path, idx]\n            this.leafLookup[leafPath.join(',')] = leaf\n        })\n        // The search text lets us filter branches whose leaves may not contain the text we need\n        const searchText = [\n            treeBranch.label.toLowerCase().trim(),\n            ...subBranches.map(({ searchText }) => searchText),\n            ...leaves.map(({ label }) => label.toLowerCase().trim())\n        ].join(' ')\n        return { treeBranch, searchText, subBranches, leaves }\n    }\n}\n\nexport default RaveProjectTree\n","import React, { useState } from 'react'\n\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden'\n    },\n    appBar: {\n        flex: '0 0'\n    },\n    tabs: {},\n    tabContents: {\n        position: 'relative',\n        overflow: 'hidden',\n        flexGrow: 1\n    },\n    closeButton: {\n        zIndex: 1000,\n        background: theme.palette.secondary.main,\n        color: theme.palette.secondary.contrastText,\n        position: 'absolute',\n        top: 0,\n        right: 0\n    }\n}))\n\ninterface TreeDrawerProps {\n    tabs: { label: string; value: React.ReactChild }[]\n}\n\nconst TreeDrawer: React.FC<TreeDrawerProps> = ({ tabs }: TreeDrawerProps) => {\n    const classes = useStyles()\n    const [activeTab, setValue] = useState<number>(0)\n\n    const handleChange = (event: React.ChangeEvent<Record<string, unknown>>, newValue: number) => {\n        setValue(newValue)\n    }\n    return (\n        <div className={classes.root}>\n            <Tabs\n                value={activeTab}\n                className={classes.tabs}\n                onChange={handleChange}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                variant=\"fullWidth\"\n                aria-label=\"full width tabs example\"\n            >\n                {tabs.map((tab, idx) => (\n                    <Tab key={`tab-${idx}`} label={tab.label} value={idx} />\n                ))}\n            </Tabs>\n            {tabs.map(({ value }, tid) => (\n                <div\n                    key={`tab-${tid}`}\n                    className={classes.tabContents}\n                    style={{ display: tid === activeTab ? 'block' : 'none' }}\n                >\n                    {value}\n                </div>\n            ))}\n        </div>\n    )\n}\n\nexport default TreeDrawer\n","import { useState, useEffect } from 'react'\nimport RaveProjectTree from '../lib/RaveProjectTree'\nimport { RaveTreeBranch } from '../types'\nimport _ from 'lodash'\n\nconst MIN_SEARCH_LENGTH = 3\n\ninterface UseProjectTreeInterface {\n    fullTree?: RaveProjectTree\n    filteredTree: RaveTreeBranch\n    searchText: string\n    setSearchText: (val: string) => void\n}\n\nconst useProjectTree = (raveTree: RaveProjectTree): UseProjectTreeInterface => {\n    const [searchText, setSearchText] = useState<string>('')\n    const [filteredTree, setFilteredTree] = useState<RaveTreeBranch>(raveTree.tree)\n\n    // Debounce so it doesn't freak out on every keystroke\n    const debouncedFilterTree = _.debounce(\n        (rt: RaveProjectTree, st: string) => setFilteredTree(rt.filterTreeByTextRecursive(st, MIN_SEARCH_LENGTH)),\n        500,\n        {}\n    )\n\n    useEffect(() => {\n        debouncedFilterTree(raveTree, searchText)\n    }, [searchText, raveTree])\n\n    return {\n        filteredTree,\n        searchText,\n        setSearchText\n    }\n}\n\nexport default useProjectTree\n","import React from 'react'\nimport { ProjectTreeLayerTypes } from '@riverscapes/common'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { IconProps } from '@material-ui/core'\nimport { Multidot, Polygon, Polyline, Raster } from '@riverscapes/react-icons'\n\nconst useStyles = makeStyles(() => ({\n    root: {}\n}))\n\ninterface LayerIconProps {\n    className?: string\n    layerType: ProjectTreeLayerTypes\n    iconProps?: IconProps\n}\n\nconst LayerIcon: React.FC<LayerIconProps> = ({ layerType, iconProps, className }: LayerIconProps) => {\n    const classes = useStyles()\n\n    let Icon = Multidot\n    switch (layerType) {\n        case ProjectTreeLayerTypes.point:\n            Icon = Multidot\n            break\n        case ProjectTreeLayerTypes.line:\n            Icon = Polyline\n            break\n        case ProjectTreeLayerTypes.polygon:\n            Icon = Polygon\n            break\n        case ProjectTreeLayerTypes.raster:\n            Icon = Raster\n            break\n        default:\n            break\n    }\n    return <Icon className={className || classes.root} {...iconProps} />\n}\n\nexport default LayerIcon\n","import React from 'react'\n// import React, { useState, useEffect } from 'react'\nimport { RaveTreeBranch, MapLayer } from '../../types'\nimport { ProjectTreeLeaf, TileService, ProjectTreeLayerTileTypes, TilingStatus } from '@riverscapes/common'\n\nimport TreeItem from '@material-ui/lab/TreeItem'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Tooltip from '@material-ui/core/Tooltip'\n// import LayerMeta from './LayerMeta'\n\nimport ListIcon from '@material-ui/icons/ListAlt'\nimport LayerIcon from '../LayerIcon'\nimport clsx from 'clsx'\n\ninterface TreeLeafProps {\n    ptLeaf: ProjectTreeLeaf\n    tiles: Record<string, TileService>\n    layers: MapLayer[]\n    leafId: number\n    handleContext: (ctx: ProjectTreeLeaf, mousex: number, mousey: number) => void\n    addLayer: (leaf: ProjectTreeLeaf) => void\n    removeLayer: (leaf: ProjectTreeLeaf) => void\n}\n// const FADE_TIME = 500\n\nconst useLeafStyles = makeStyles((theme) => ({\n    leaf: {\n        cursor: 'context-menu',\n        marginLeft: 10\n    },\n    active: {\n        fontWeight: 'bold'\n    },\n    treeLeafLabel: {\n        display: 'flex'\n    },\n    innerLabel: {\n        flexGrow: 0\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    metaIcon: {\n        margin: theme.spacing(0.25),\n        opacity: 0.2,\n        fontSize: theme.spacing(2),\n        lineHeight: '1rem'\n    },\n    loadingSpinner: {\n        color: theme.palette.text.secondary\n    },\n    tileStatus: {\n        flexGrow: 0,\n        fontStyle: 'italic'\n    },\n    leafQUEUED: {\n        color: '#999999',\n        fontStyle: 'italic'\n    },\n    leafCREATING: {\n        color: 'orange'\n    },\n    leafERROR: {\n        color: 'red',\n        fontStyle: 'italic'\n    },\n    leafUNKNOWN: {\n        color: theme.palette.text.secondary,\n        fontStyle: 'italic'\n    },\n    leafSUCCESS: {}\n}))\n\n// const useVisibility = (rawHidden: boolean): { visClass: string; hidden: boolean } => {\n//     const classes = makeStyles(() => ({\n//         root: {\n//             transition: `opacity ${FADE_TIME / 1000}s ease-in-out`\n//         },\n//         visible: { opacity: 1 },\n//         invisible: { opacity: 0 }\n//     }))()\n//     const cssClassname = (cssHide: boolean): string =>\n//         cssHide ? clsx(classes.root, classes.invisible) : clsx(classes.root, classes.invisible)\n//     const [state, setState] = useState<[boolean, string]>([rawHidden, cssClassname(rawHidden)])\n\n//     useEffect(() => {\n//         setState([state[0], cssClassname(rawHidden)])\n//         setTimeout(() => setState([rawHidden, state[1]]), 1500)\n//     }, [rawHidden])\n//     return { visClass: state[1], hidden: state[0] }\n// }\n\nexport const TreeLeaf: React.FC<TreeLeafProps> = ({\n    ptLeaf,\n    tiles,\n    layers,\n    leafId,\n    handleContext,\n    addLayer,\n    removeLayer\n}: TreeLeafProps) => {\n    const classes = useLeafStyles()\n    // const { hidden, visClass } = useVisibility(Boolean(ptLeaf.hidden))\n    const onCtxMenu = (event) => {\n        event.preventDefault()\n        handleContext(ptLeaf, event.clientX - 2, event.clientY - 4)\n    }\n    const activeLayer = layers.find((lyr) => lyr.leaf === ptLeaf) as MapLayer\n    const active = Boolean(layers && activeLayer)\n    const mapAddable = Boolean(ProjectTreeLayerTileTypes.indexOf(ptLeaf.layerType) > -1)\n    const status = ptLeaf.url && tiles && tiles[ptLeaf.url] ? tiles[ptLeaf.url].status : null\n    // const canAdd = Boolean(mapAddable && ptLeaf.url && ptLeaf.nodeExists && status === TilingStatus.SUCCESS)\n    const hasMeta = Boolean(ptLeaf.meta && Object.keys(ptLeaf.meta).length > 0)\n    let tileStatusStr: React.ReactElement | string | null = null\n    switch (status) {\n        case TilingStatus.SUCCESS:\n            // tileStatusStr = 'Available'\n            break\n        case TilingStatus.QUEUED:\n            tileStatusStr = 'Queued'\n            break\n        case TilingStatus.CREATING:\n            tileStatusStr = 'Building Tiles'\n            break\n        case TilingStatus.ERROR:\n            tileStatusStr = 'ERROR'\n            break\n        case TilingStatus.UNKNOWN:\n            tileStatusStr = (\n                <CircularProgress className={classes.loadingSpinner} color=\"inherit\" thickness={3} size={15} />\n            )\n            break\n        default:\n            break\n    }\n    return (\n        <TreeItem\n            key={`leaf-${ptLeaf.pid}-${leafId}`}\n            nodeId={`leaf-${ptLeaf.pid}-${leafId}`}\n            className={clsx(classes.leaf, mapAddable && status && classes[`leaf${status}`])}\n            hidden={ptLeaf.hidden || !status}\n            onDoubleClick={() => {\n                if (active) removeLayer(ptLeaf)\n                else addLayer(ptLeaf)\n            }}\n            label={\n                <div className={classes.treeLeafLabel}>\n                    <Typography\n                        variant=\"body2\"\n                        color=\"inherit\"\n                        className={clsx(classes.innerLabel, active && classes.active)}\n                    >\n                        {ptLeaf.label}\n                    </Typography>\n                    <div className={classes.spacer} />\n                    {hasMeta && (\n                        <Tooltip\n                            // title={<LayerMeta meta={ptLeaf.meta as Record<string, string>} minimal />}\n                            title=\"This layer has metadata\"\n                            arrow\n                            placement=\"right\"\n                        >\n                            <ListIcon className={classes.metaIcon} color=\"inherit\" />\n                        </Tooltip>\n                    )}\n                    {tileStatusStr}\n                </div>\n            }\n            onContextMenu={onCtxMenu}\n            icon={<LayerIcon layerType={ptLeaf.layerType} />}\n        />\n    )\n}\n\ninterface TreeBranchRecursiveProps {\n    rtBranch: RaveTreeBranch\n    tiles: Record<string, TileService>\n    layers: MapLayer[]\n    handleContext: (ctx: ProjectTreeLeaf, mousex: number, mousey: number) => void\n    addLayer: (leaf: ProjectTreeLeaf) => void\n    removeLayer: (leaf: ProjectTreeLeaf) => void\n}\n\nconst useBranchStyles = makeStyles((theme) => ({\n    branch: {\n        marginTop: theme.spacing(0.5)\n    }\n}))\n\nexport const TreeBranchRecursive: React.FC<TreeBranchRecursiveProps> = ({\n    rtBranch,\n    tiles,\n    layers,\n    handleContext,\n    addLayer,\n    removeLayer\n}: TreeBranchRecursiveProps) => {\n    const classes = useBranchStyles()\n    // const { hidden, visClass } = useVisibility(Boolean(rtBranch.treeBranch.hidden))\n    return (\n        <TreeItem\n            key={`branch-${rtBranch.treeBranch.bid}`}\n            nodeId={`branch-${rtBranch.treeBranch.bid}`}\n            className={clsx(classes.branch)}\n            onDoubleClick={(e) => {\n                e.preventDefault()\n                e.stopPropagation()\n            }}\n            onContextMenu={(e) => {\n                e.preventDefault()\n                e.stopPropagation()\n            }}\n            hidden={rtBranch.treeBranch.hidden}\n            label={<Typography variant=\"body1\">{rtBranch.treeBranch.label}</Typography>}\n        >\n            {rtBranch.subBranches.map((node, idx) => (\n                <TreeBranchRecursive\n                    key={`branch-${idx}`}\n                    {...{ rtBranch: node, tiles, layers, handleContext, addLayer, removeLayer }}\n                />\n            ))}\n            {rtBranch.leaves.map((node, idx) => (\n                <TreeLeaf\n                    key={`leaf-${idx}`}\n                    {...{ ptLeaf: node, tiles, layers, leafId: idx, handleContext, addLayer, removeLayer }}\n                />\n            ))}\n        </TreeItem>\n    )\n}\n","import React from 'react'\n\n// import { makeStyles } from '@material-ui/core/styles'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\n\nimport { ProjectTreeLeaf, ProjectTreeLayerTileTypes, TileService, TilingStatus } from '@riverscapes/common'\nimport { MapLayer } from '../../types'\n// const useStyles = makeStyles(() => ({\n//     root: {}\n// }))\n\ninterface TreeControlProps {\n    treeLeaf?: ProjectTreeLeaf\n    position?: { top: number; left: number }\n    tiles: Record<string, TileService>\n    layers: MapLayer[]\n    open: boolean\n    addLayer: (leaf: ProjectTreeLeaf) => void\n    removeLayer: (leaf: ProjectTreeLeaf) => void\n    openMeta: (args: [leaf: ProjectTreeLeaf, service: TileService]) => void\n    onClose: () => void\n}\n\nconst TreeControl: React.FC<TreeControlProps> = ({\n    treeLeaf,\n    layers,\n    open,\n    tiles,\n    onClose,\n    position,\n    addLayer,\n    openMeta,\n    removeLayer\n}: TreeControlProps) => {\n    // const classes = useStyles()\n    const activeLayer = layers.find((lyr) => lyr.leaf === treeLeaf) as MapLayer\n    const active = Boolean(treeLeaf && layers && activeLayer)\n    const mapAddable = Boolean(treeLeaf && ProjectTreeLayerTileTypes.indexOf(treeLeaf.layerType) > -1)\n    const status = treeLeaf && treeLeaf.url && tiles && tiles[treeLeaf.url] ? tiles[treeLeaf.url].status : null\n\n    // const hasMeta = Boolean(treeLeaf && treeLeaf.meta && Object.keys(treeLeaf.meta).length > 0)\n    // const tileStatusStr: string | null = null\n    // const meta = treeLeaf && treeLeaf.meta ? treeLeaf.meta : {}\n    return (\n        <Menu keepMounted open={open} onClose={onClose} anchorReference=\"anchorPosition\" anchorPosition={position}>\n            {active && (\n                <MenuItem\n                    onClick={(): void => {\n                        if (treeLeaf) removeLayer(treeLeaf)\n                        onClose()\n                    }}\n                >\n                    Remove from map\n                </MenuItem>\n            )}\n            {!active && status === TilingStatus.SUCCESS && (\n                <MenuItem\n                    onClick={(): void => {\n                        if (treeLeaf) addLayer(treeLeaf)\n                        onClose()\n                    }}\n                >\n                    Add to map\n                </MenuItem>\n            )}\n            {status === TilingStatus.QUEUED && <MenuItem disabled>Queued for tiling</MenuItem>}\n            {status === TilingStatus.CREATING && <MenuItem disabled>Currently buildign these tiles</MenuItem>}\n            {mapAddable && (\n                <MenuItem\n                    onClick={() => {\n                        openMeta([treeLeaf as ProjectTreeLeaf, tiles[treeLeaf?.url as string]])\n                        onClose()\n                    }}\n                >\n                    Layer Information\n                </MenuItem>\n            )}\n        </Menu>\n    )\n}\n\nexport default TreeControl\n","import React from 'react'\n\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableContainer from '@material-ui/core/TableContainer'\nimport TableRow from '@material-ui/core/TableRow'\nimport { dates } from '@northarrowresearch/common'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(1)\n    },\n    table: {},\n    section: {\n        marginBottom: theme.spacing(3)\n    },\n    sectionHeader: {\n        borderBottom: '1px solid'\n    },\n    metaKey: { fontWeight: 'bold' },\n    metaValue: {\n        color: theme.palette.text.secondary\n    }\n}))\n\ninterface MetaDataProps {\n    title: string\n    meta: Record<string, string>\n}\n\nconst SPECIAL_FORMATS: Record<string, (val: string) => string> = {\n    datecreated: (val) => {\n        const valDate = dates.HTML5InputToTimestamp(val)\n        return valDate > 0 ? `${dates.formatDate(valDate, 'lll')} (${dates.formatDateAgo(valDate)})` : 'unknown'\n    }\n}\nconst formatString = (key: string, val: string): string => {\n    const lwrKey = key.toLowerCase()\n    if (Object.keys(SPECIAL_FORMATS).indexOf(lwrKey) > -1) {\n        return SPECIAL_FORMATS[lwrKey](val)\n    } else return val\n}\n\nconst MetaData: React.FC<MetaDataProps> = ({ title, meta }: MetaDataProps) => {\n    const classes = useStyles()\n    if (Object.keys(meta).length === 0) return null\n    return (\n        <div className={classes.section}>\n            <Typography variant=\"subtitle1\" className={classes.sectionHeader}>\n                {title}\n            </Typography>\n            <TableContainer>\n                <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\n                    <TableBody>\n                        {Object.keys(meta).map((rowKey) => (\n                            <TableRow key={rowKey}>\n                                <TableCell component=\"th\" scope=\"row\" className={classes.metaKey}>\n                                    {rowKey}\n                                </TableCell>\n                                <TableCell align=\"right\" className={classes.metaValue}>\n                                    {formatString(rowKey, meta[rowKey])}\n                                </TableCell>\n                            </TableRow>\n                        ))}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        </div>\n    )\n}\n\nexport default MetaData\n","import React from 'react'\n\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        // padding: theme.spacing(1)\n    },\n    whBtnLogo: { height: 20, width: 20 },\n    whButton: {\n        // margin: theme.spacing(1, 1, 1, 0),\n        maxWidth: 300\n    }\n}))\n\ninterface MetaDataProps {\n    title: string\n    href: string\n}\n\nconst MetaData: React.FC<MetaDataProps> = ({ title, href }: MetaDataProps) => {\n    const classes = useStyles()\n    return (\n        <Button\n            className={classes.whButton}\n            target=\"_blank\"\n            variant=\"contained\"\n            href={href}\n            color=\"secondary\"\n            fullWidth\n        >\n            <img\n                className={classes.whBtnLogo}\n                src={'https://riverscapes.xyz/assets/images/RiverscapesLogo.png'}\n                alt=\"logo\"\n            />\n            {title}\n        </Button>\n    )\n}\n\nexport default MetaData\n","import React from 'react'\n\nimport Paper from '@material-ui/core/Paper'\nimport { warehouseUrl } from '../../config'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\nimport MetaData from './MetaData'\nimport WHButton from '../WHButton'\nconst DONTSHOW = ['_rs_lyr_origin_url']\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(1)\n    },\n    minimal: {\n        // background:\n    },\n    whNote: {\n        padding: theme.spacing(2, 1)\n    }\n}))\n\ninterface LayerMetaProps {\n    meta: Record<string, string>\n    minimal?: boolean\n}\n\nfunction makeSections(meta: Record<string, string>): Record<string, Record<string, string>> {\n    const keys = Object.keys(meta).filter((k) => DONTSHOW.indexOf(k) < 0)\n\n    const distill = (key) =>\n        keys.filter((k) => k.indexOf(key) === 0).reduce((acc, rk) => ({ ...acc, [rk.replace(key, '')]: meta[rk] }), {})\n\n    return {\n        upstreamWarehouse: distill('_rs_wh_'),\n        upstreamProject: distill('_rs_prj_'),\n        upstreamLayer: distill('_rs_lyr_'),\n        Layer: keys.filter((k) => k.indexOf('_rs') !== 0).reduce((acc, rk) => ({ ...acc, [rk]: meta[rk] }), {})\n    }\n}\n\nconst LayerMeta: React.FC<LayerMetaProps> = ({ meta, minimal }: LayerMetaProps) => {\n    const classes = useStyles()\n    const sections = makeSections(meta)\n    return (\n        <Paper className={minimal ? classes.minimal : classes.root}>\n            {Object.keys(sections.Layer).length > 0 && <MetaData title=\"Layer Metadata\" meta={sections.Layer} />}\n            {!minimal && Object.keys(sections.upstreamWarehouse).length > 0 && (\n                <div className={classes.whNote}>\n                    <Typography variant=\"caption\" component=\"div\">\n                        This layer was imported from a {meta._rs_prj_projType} project in the Riverscapes warehouse. You\n                        can visit the original project using the button below.\n                    </Typography>\n                    <WHButton\n                        title={`Original ${meta._rs_prj_projType} Project`}\n                        href={`${warehouseUrl}/#/${meta['_rs_wh_program']}/${meta['_rs_wh_id']}`}\n                    />\n                </div>\n            )}\n            {Object.keys(sections.upstreamProject).length > 0 && (\n                <MetaData title=\"Original Project Metadata\" meta={sections.upstreamProject} />\n            )}\n            {Object.keys(sections.upstreamLayer).length > 0 && (\n                <MetaData title=\"Original Layer Metadata\" meta={sections.upstreamLayer} />\n            )}\n        </Paper>\n    )\n}\n\nexport default LayerMeta\n","import React from 'react'\n\nimport { dates } from '@northarrowresearch/common'\nimport Paper from '@material-ui/core/Paper'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { TileIndexJSON, TileService } from '@riverscapes/common'\n\nimport numeral from 'numeral'\nimport MetaData from './MetaData'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(1)\n    },\n    sectionHeader: {\n        borderBottom: '1px solid'\n    },\n    table: {},\n    metaKey: { fontWeight: 'bold' },\n    metaValue: {\n        color: theme.palette.text.secondary\n    }\n}))\n\ninterface LayerTileInfoProps {\n    tiles: TileService\n}\n\nconst LayerTileInfo: React.FC<LayerTileInfoProps> = ({ tiles }: LayerTileInfoProps) => {\n    const classes = useStyles()\n    const tilesJSON = tiles.tileJSON as TileIndexJSON\n    const meta: Record<string, string> = {\n        Status: tiles.status as string,\n        Error: tiles.error as string,\n        Started: tilesJSON\n            ? `${dates.formatDate(tilesJSON.started, 'lll')} (${dates.formatDateAgo(tilesJSON.started)})`\n            : 'unknown',\n        'Last status': tilesJSON\n            ? `${dates.formatDate(tilesJSON.lastStatus, 'lll')} (${dates.formatDateAgo(tilesJSON.lastStatus)})`\n            : 'unknown',\n        'Creation time': tilesJSON ? `${((tilesJSON.duration || 0) / 60).toFixed(0)} minutes` : 'unknown',\n        'Original Size':\n            tilesJSON && tilesJSON.originFile ? numeral(tilesJSON.originFile.size).format('0.0 b') : 'unknown',\n        'Physical path': tilesJSON ? (tilesJSON.originFile?.key as string) : 'unknown',\n        'Modified (origin)': tilesJSON\n            ? `${dates.formatDate(tilesJSON.originFile?.lastModified, 'lll')} (${dates.formatDateAgo(\n                  tilesJSON.originFile?.lastModified\n              )})`\n            : 'unknown'\n    }\n    return (\n        <Paper className={classes.root}>\n            <MetaData title=\"Webtile information\" meta={meta} />\n        </Paper>\n    )\n}\n\nexport default LayerTileInfo\n","import React from 'react'\n\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { ProjectTreeLeaf, TileService } from '@riverscapes/common'\nimport LayerIcon from '../LayerIcon'\nimport LayerMeta from './LayerMeta'\nimport { makeStyles } from '@material-ui/core/styles'\nimport LayerTileInfo from './LayerTileInfo'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: '100%',\n        overflow: 'hidden',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    toolbar: {\n        flex: '0 0 ',\n        padding: theme.spacing(0, 1),\n        minHeight: theme.spacing(6),\n        background: theme.palette.primary.dark,\n        color: theme.palette.primary.contrastText\n    },\n    spacer: { flexGrow: 1 },\n    layerTitle: {},\n    layerIcon: {},\n    layerMeta: {\n        flexGrow: 1,\n        overflowY: 'scroll',\n        userSelect: 'text',\n        '& *': {\n            userSelect: 'text'\n        }\n    },\n    typeContainer: {\n        // borderRadius: theme.spacing(1),\n        // background: '#FFFFFF22',\n        // margin: theme.spacing(1),\n        // padding: theme.spacing(0, 1),\n        // border: '1px solid #FFFFFF22'\n    },\n    closeButton: {\n        // marginLeft: theme.spacing(2)\n    }\n}))\n\ninterface LayerInfoProps {\n    leaf: ProjectTreeLeaf\n    tiles: TileService\n    handleClose: () => void\n}\n\nconst LayerInfo: React.FC<LayerInfoProps> = ({ leaf, tiles, handleClose }: LayerInfoProps) => {\n    const classes = useStyles()\n    return (\n        <div className={classes.root}>\n            <Toolbar className={classes.toolbar}>\n                <Tooltip title={`This is a ${leaf.layerType} layer`}>\n                    <IconButton edge=\"start\" className={classes.layerIcon} color=\"inherit\" aria-label=\"menu\">\n                        <LayerIcon layerType={leaf.layerType} />\n                    </IconButton>\n                </Tooltip>\n                <Typography variant=\"body2\" className={classes.layerTitle}>\n                    {leaf.label}\n                </Typography>\n                <div className={classes.spacer} />\n                {/* <div className={classes.typeContainer}>\n                    </div> */}\n                <IconButton\n                    edge=\"start\"\n                    className={classes.closeButton}\n                    color=\"inherit\"\n                    aria-label=\"menu\"\n                    onClick={handleClose}\n                >\n                    <CloseIcon />\n                </IconButton>\n            </Toolbar>\n            <div className={classes.layerMeta}>\n                {leaf.meta && <LayerMeta meta={leaf.meta || {}} />}\n                {tiles && <LayerTileInfo tiles={tiles} />}\n            </div>\n        </div>\n    )\n}\n\nexport default LayerInfo\n","import React from 'react'\nimport SplitPane, { Size } from 'react-split-pane'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        height: '100%',\n        position: 'relative'\n        // marginLeft: theme.spacing(1)\n    },\n    splitPane: {},\n    resizer: {\n        background: '#000',\n        opacity: 0.2,\n        zIndex: 1,\n        boxSizing: 'border-box',\n        backgroundClip: 'padding-box',\n        '&:hover': {\n            transition: 'all 2s ease'\n        },\n        '&.horizontal': {\n            height: 11,\n            margin: '-5px 0',\n            borderTop: '5px solid rgba(255, 255, 255, 0)',\n            borderBottom: '5px solid rgba(255, 255, 255, 0)',\n            cursor: 'row-resize',\n            width: '100%',\n            '&:hover': {\n                borderTop: '5px solid rgba(0, 0, 0, 0.5)',\n                borderBottom: '5px solid rgba(0, 0, 0, 0.5)'\n            }\n        },\n        '&.vertical': {\n            width: 11,\n            margin: '0 -5px',\n            borderLeft: '5px solid rgba(255, 255, 255, 0)',\n            borderRight: '5px solid rgba(255, 255, 255, 0)',\n            cursor: 'col-resize',\n            height: '100%',\n            '&:hover': {\n                borderLeft: '5px solid rgba(0, 0, 0, 0.5)',\n                borderRight: '5px solid rgba(0, 0, 0, 0.5)'\n            }\n        },\n        '&.disabled': {\n            cursor: 'not-allowed',\n            '&:hover': {\n                borderColor: 'transparent'\n            }\n        }\n    }\n}))\n\ninterface AppSplitterProps {\n    open: boolean\n    child1: React.ReactChild\n    child2: React.ReactChild\n    split?: 'horizontal' | 'vertical'\n    primary?: 'first' | 'second'\n    defaultSize?: Size\n    minSize?: Size\n    maxSize?: Size\n}\n\nconst AppSplitter: React.FC<AppSplitterProps> = ({\n    open,\n    child1,\n    child2,\n    split,\n    primary,\n    defaultSize,\n    minSize,\n    maxSize\n}: AppSplitterProps) => {\n    const classes = useStyles()\n    if (!open) return <div className={classes.root}>{!primary || primary === 'first' ? child1 : child2}</div>\n    else {\n        return (\n            <div className={classes.root}>\n                <SplitPane\n                    className={classes.splitPane}\n                    resizerClassName={classes.resizer}\n                    split={split}\n                    primary={primary}\n                    defaultSize={defaultSize}\n                    minSize={minSize}\n                    maxSize={maxSize}\n                    pane1Style={{ overflow: 'hidden' }}\n                    pane2Style={{ overflow: 'hidden' }}\n                >\n                    {child1}\n                    {child2}\n                </SplitPane>\n            </div>\n        )\n    }\n}\n\nexport default AppSplitter\n","import React, { useState, useEffect } from 'react'\n\nimport TreeView from '@material-ui/lab/TreeView'\nimport { makeStyles } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\nimport InputAdornment from '@material-ui/core/InputAdornment'\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\nimport SearchIcon from '@material-ui/icons/Search'\n\nimport useProjectTree from '../../hooks/useProjectTree'\nimport RaveProjectTree from '../../lib/RaveProjectTree'\nimport { ProjectTreeLeaf, TileService } from '@riverscapes/common'\nimport { TreeBranchRecursive } from './treeBuild'\nimport TreeContextMenu from './TreeContextMenu'\nimport LayerInfo from './LayerInfo'\nimport AppSplitter from '../AppSplitter'\n\nimport { RaveTreeBranch, MapLayer } from '../../types'\n\nconst useStyles = makeStyles((theme) => ({\n    container: {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    tree: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        paddingBottom: theme.spacing(5)\n    },\n    searchBox: {\n        flexGrow: 0,\n        padding: theme.spacing(0.5)\n    },\n    searchBoxInput: {\n        padding: theme.spacing(0.75, 0.5)\n    }\n}))\n\ninterface TreeControlProps {\n    treeObj: RaveProjectTree\n    tiles: Record<string, TileService>\n    layers: MapLayer[]\n    addLayer: (lyr: ProjectTreeLeaf) => void\n    removeLayer: (lyr: ProjectTreeLeaf) => void\n}\n\nconst TreeControl: React.FC<TreeControlProps> = ({\n    treeObj,\n    tiles,\n    layers,\n    addLayer,\n    removeLayer\n}: TreeControlProps) => {\n    const classes = useStyles()\n    const { filteredTree, setSearchText } = useProjectTree(treeObj)\n    const [expanded, setExpanded] = React.useState<string[]>([])\n    const [lyrInfo, setLyrInfo] = React.useState<[ProjectTreeLeaf, TileService]>()\n    const [selected, setSelected] = React.useState<string[]>([])\n    const [contextMenu, setContextMenu] = useState<[ProjectTreeLeaf, number, number]>()\n\n    useEffect(() => {\n        const newExpanded: string[] = []\n        const recursiveExpanded = (br: RaveTreeBranch): void => {\n            if (!br.treeBranch.collapsed) newExpanded.push(`branch-${br.treeBranch.bid}`)\n            br.subBranches.forEach((br) => recursiveExpanded(br))\n        }\n        recursiveExpanded(treeObj.tree)\n        setExpanded(newExpanded)\n    }, [treeObj])\n\n    const handleContext = (ctx: ProjectTreeLeaf, mousex: number, mousey: number): void =>\n        setContextMenu([ctx, mousex, mousey])\n\n    const handleToggle = (event: React.ChangeEvent<Record<string, unknown>>, nodeIds: string[]) => {\n        setExpanded(nodeIds)\n    }\n\n    const handleSelect = (event: React.ChangeEvent<Record<string, unknown>>, nodeIds: string[]) => {\n        setSelected(nodeIds)\n    }\n\n    return (\n        <AppSplitter\n            open={Boolean(lyrInfo)}\n            split=\"horizontal\"\n            primary=\"first\"\n            defaultSize=\"60%\"\n            maxSize=\"80%\"\n            minSize=\"30%\"\n            child1={\n                <div className={classes.container}>\n                    <TextField\n                        fullWidth\n                        className={classes.searchBox}\n                        placeholder=\"Filter Project Layers...\"\n                        variant=\"outlined\"\n                        onChange={(event) => setSearchText((event.target.value as string).toLowerCase().trim())}\n                        InputProps={{\n                            classes: { input: classes.searchBoxInput },\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <SearchIcon />\n                                </InputAdornment>\n                            )\n                        }}\n                    />\n                    <TreeView\n                        className={classes.tree}\n                        defaultCollapseIcon={<ExpandMoreIcon />}\n                        defaultExpandIcon={<ChevronRightIcon />}\n                        expanded={expanded}\n                        selected={selected}\n                        onNodeToggle={handleToggle}\n                        onNodeSelect={handleSelect}\n                    >\n                        {filteredTree && (\n                            <TreeBranchRecursive\n                                {...{ rtBranch: filteredTree, tiles, layers, handleContext, addLayer, removeLayer }}\n                            />\n                        )}\n                    </TreeView>\n                    <TreeContextMenu\n                        treeLeaf={contextMenu && contextMenu[0]}\n                        open={Boolean(contextMenu)}\n                        layers={layers}\n                        tiles={tiles}\n                        onClose={() => setContextMenu(undefined)}\n                        addLayer={addLayer}\n                        removeLayer={removeLayer}\n                        openMeta={setLyrInfo}\n                        position={\n                            contextMenu && contextMenu[2] !== null && contextMenu[1] !== null\n                                ? { top: contextMenu[2], left: contextMenu[1] }\n                                : undefined\n                        }\n                    />\n                </div>\n            }\n            child2={\n                lyrInfo ? (\n                    <LayerInfo\n                        leaf={lyrInfo[0]}\n                        tiles={lyrInfo[1]}\n                        handleClose={() => {\n                            setLyrInfo(undefined)\n                        }}\n                    />\n                ) : (\n                    <div />\n                )\n            }\n        />\n    )\n}\n\nexport default TreeControl\n","import React from 'react'\nimport { Source, Layer, LayerProps } from 'react-map-gl'\nimport 'mapbox-gl/dist/mapbox-gl.css'\n// import uuid4 from 'uuid/v4'\nimport { GISTileLayer } from '@riverscapes/common'\nimport { MapLayer } from '../../../types'\n\nconst layerProps = (layer: MapLayer): LayerProps => {\n    const lyrProps: LayerProps = {\n        // id: layer.leaf.layerId + uuid4(),\n        type: 'circle',\n        minzoom: layer.tiles?.tileJSON?.minZoom || 0,\n        maxzoom: 24,\n        layout: {},\n        paint: {\n            'circle-stroke-opacity': 1,\n            'circle-stroke-width': 2,\n            'circle-stroke-color': layer.legend.color['300'],\n            'circle-opacity': 0.5,\n            'circle-radius': 10,\n            'circle-color': layer.legend.color['500']\n        }\n    }\n    if (layer.tiles?.tileJSON?.rsLayer.subLayers) {\n        const sublyr = layer.tiles?.tileJSON?.rsLayer.subLayers.find(\n            (sl) => sl.id === layer.leaf.layerId\n        ) as GISTileLayer\n        lyrProps['source-layer'] = sublyr.path\n    }\n    return lyrProps\n}\n\ninterface RSPointProps {\n    layer: MapLayer\n    lyrId: number\n}\n\nconst RSPoint: React.FC<RSPointProps> = ({ layer, lyrId }: RSPointProps) => {\n    if (!layer.tiles?.tileJSON) return null\n\n    const beforeId = lyrId > 0 ? `mapLayer-${lyrId - 1}` : undefined\n    const id = `mapLayer-${lyrId}`\n    return (\n        <Source\n            // id={sourceId}\n            type=\"vector\"\n            maxzoom={layer.tiles?.tileJSON?.maxZoom || 20}\n            minzoom={layer.tiles?.tileJSON?.minZoom || 4}\n            tiles={[`${layer.leaf.url}{z}/{x}/{y}.${layer.tiles?.tileJSON?.format || 'pbf'}`]}\n        >\n            <Layer {...layerProps(layer)} beforeId={beforeId} id={id} />\n        </Source>\n    )\n}\n\nexport default RSPoint\n","import React from 'react'\nimport { Source, Layer, LayerProps } from 'react-map-gl'\nimport { GISTileLayer } from '@riverscapes/common'\nimport { MapLayer } from '../../../types'\n\nconst layerProps = (layer: MapLayer): LayerProps => {\n    const tileJSON = layer.tiles?.tileJSON\n    const lyrProps: LayerProps = {\n        type: 'line',\n        minzoom: tileJSON?.minZoom || 0,\n        maxzoom: 24,\n        layout: {},\n        paint: {\n            'line-color': '#00FF00'\n        }\n    }\n    if (tileJSON?.rsLayer.subLayers) {\n        const sublyr = tileJSON?.rsLayer.subLayers.find((sl) => sl.id === layer.leaf.layerId) as GISTileLayer\n        lyrProps['source-layer'] = sublyr.path\n    }\n    return lyrProps\n}\n\ninterface RSPolygonProps {\n    layer: MapLayer\n    lyrId: number\n}\n\nconst RSLine: React.FC<RSPolygonProps> = ({ layer, lyrId }: RSPolygonProps) => {\n    if (!layer.tiles?.tileJSON) return null\n    const tileJSON = layer.tiles?.tileJSON\n    const beforeId = lyrId > 0 ? `mapLayer-${lyrId - 1}` : undefined\n    const id = `mapLayer-${lyrId}`\n    return (\n        <Source\n            type=\"vector\"\n            maxzoom={tileJSON?.maxZoom || 20}\n            minzoom={tileJSON?.minZoom || 4}\n            tiles={[`${layer.leaf.url}{z}/{x}/{y}.${tileJSON?.format || 'pbf'}`]}\n        >\n            <Layer {...layerProps(layer)} beforeId={beforeId} id={id} />\n        </Source>\n    )\n}\n\nexport default RSLine\n","import React from 'react'\nimport { Source, Layer, LayerProps } from 'react-map-gl'\nimport { GISTileLayer } from '@riverscapes/common'\nimport { MapLayer } from '../../../types'\n\nconst layerProps = (layer: MapLayer): LayerProps => {\n    const lyrProps: LayerProps = {\n        type: 'fill',\n        minzoom: layer.tiles?.tileJSON?.minZoom || 0,\n        maxzoom: 24,\n        layout: {},\n        paint: {\n            'fill-opacity': 0.5,\n            'fill-color': layer.legend.color['500']\n        }\n    }\n    if (layer.tiles?.tileJSON?.rsLayer.subLayers) {\n        const sublyr = layer.tiles?.tileJSON?.rsLayer.subLayers.find(\n            (sl) => sl.id === layer.leaf.layerId\n        ) as GISTileLayer\n        lyrProps['source-layer'] = sublyr.path\n    }\n    return lyrProps\n}\n\nconst layerPropsOutline = (layer: MapLayer): LayerProps => {\n    const lyrProps: LayerProps = {\n        type: 'line',\n        minzoom: layer.tiles?.tileJSON?.minZoom || 0,\n        maxzoom: 24,\n        layout: {},\n        paint: {\n            'line-color': layer.legend.color['400']\n        }\n    }\n    if (layer.tiles?.tileJSON?.rsLayer.subLayers) {\n        const sublyr = layer.tiles?.tileJSON?.rsLayer.subLayers.find(\n            (sl) => sl.id === layer.leaf.layerId\n        ) as GISTileLayer\n        lyrProps['source-layer'] = sublyr.path\n    }\n    return lyrProps\n}\n\ninterface RSPolygonProps {\n    layer: MapLayer\n    lyrId: number\n}\n\nconst RSPolygon: React.FC<RSPolygonProps> = ({ layer, lyrId }: RSPolygonProps) => {\n    if (!layer.tiles?.tileJSON) return null\n\n    const beforeId = lyrId > 0 ? `mapLayer-${lyrId - 1}` : undefined\n    const id = `mapLayer-${lyrId}`\n    return (\n        <Source\n            type=\"vector\"\n            maxzoom={layer.tiles?.tileJSON?.maxZoom || 20}\n            minzoom={layer.tiles?.tileJSON?.minZoom || 4}\n            tiles={[`${layer.leaf.url}{z}/{x}/{y}.${layer.tiles?.tileJSON?.format || 'pbf'}`]}\n        >\n            <Layer {...layerPropsOutline(layer)} beforeId={id} />\n            <Layer {...layerProps(layer)} beforeId={beforeId} id={id} />\n        </Source>\n    )\n}\n\nexport default RSPolygon\n","import React from 'react'\nimport { Source, Layer, LayerProps } from 'react-map-gl'\nimport { GISTileLayer } from '@riverscapes/common'\nimport { MapLayer } from '../../../types'\n\nconst layerProps = (layer: MapLayer): LayerProps => {\n    const lyrProps: LayerProps = {\n        type: 'raster',\n        minzoom: layer.tiles?.tileJSON?.minZoom || 0,\n        maxzoom: 24,\n        layout: {},\n        paint: {}\n    }\n    if (layer.tiles?.tileJSON?.rsLayer.subLayers) {\n        const sublyr = layer.tiles?.tileJSON?.rsLayer.subLayers.find(\n            (sl) => sl.id === layer.leaf.layerId\n        ) as GISTileLayer\n        lyrProps['source-layer'] = sublyr.path\n    }\n    return lyrProps\n}\ninterface RSPolygonProps {\n    layer: MapLayer\n    lyrId: number\n}\n\nconst RSPoint: React.FC<RSPolygonProps> = ({ layer, lyrId }: RSPolygonProps) => {\n    if (!layer.tiles?.tileJSON) return null\n    const beforeId = lyrId > 0 ? `mapLayer-${lyrId - 1}` : undefined\n    const id = `mapLayer-${lyrId}`\n    return (\n        <Source\n            // id={sourceId}\n            type=\"raster\"\n            scheme=\"tms\"\n            maxzoom={layer.tiles?.tileJSON?.maxZoom || 20}\n            minzoom={layer.tiles?.tileJSON?.minZoom || 4}\n            tiles={[`${layer.leaf.url}/{z}/{x}/{y}.${layer.tiles?.tileJSON?.format || 'pbf'}`]}\n        >\n            <Layer {...layerProps(layer)} beforeId={beforeId} id={id} />\n        </Source>\n    )\n}\n\nexport default RSPoint\n","import React, { useState, useRef, useEffect, useMemo } from 'react'\n// import MAP_STYLE from '../../mapStyles/BasicMap.json'\nimport { config } from '@riverscapes/react-common'\nimport MapGL, { ViewportProps } from 'react-map-gl'\nimport { makeStyles } from '@material-ui/core/styles'\nimport 'mapbox-gl/dist/mapbox-gl.css'\n\nimport RSPoint from './layers/RSPoint'\nimport RSLine from './layers/RSLine'\nimport RSPolygon from './layers/RSPolygon'\nimport RSRaster from './layers/RSRaster'\n\nimport { ProjectTreeLayerTypes } from '@riverscapes/common'\nimport mapStyles from '../../mapStyles'\nimport { BaseLayer, MapLayer } from '../../types'\nimport _ from 'lodash'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        marginLeft: theme.spacing(1),\n        height: '100%',\n        width: '100%'\n    }\n}))\n\ninterface MapProps {\n    layers: MapLayer[]\n    baseLayer: string\n    bounds?: [minx: number, miny: number, maxx: number, maxy: number]\n    zoomBounds: [minZoom: number, maxZoom: number]\n    children?: React.ReactChild | React.ReactChildren | React.ReactElement[]\n}\n\nconst defaultViewport: ViewportProps = {\n    // longitude: -115.8,\n    // latitude: 46.1,\n    zoom: 8\n    // bearing: 0,\n    // pitch: 0\n}\n\nconst debounceConsoleLog = _.debounce((...vals) => console.log(...vals), 1500)\n\nconst Map: React.FC<MapProps> = ({ children, layers, baseLayer, bounds, zoomBounds }: MapProps) => {\n    const classes = useStyles()\n    const [viewport, _setViewport] = useState<ViewportProps>(defaultViewport)\n    // NOTE: this is a little jankey\n    const [tileUpdates, setTileUpdates] = useState<string[]>()\n    const viewportRef = useRef<ViewportProps>()\n    viewportRef.current = viewport\n\n    // Constrain the Bounds and zoom\n    const setViewport = (inViewport: ViewportProps) => {\n        const newViewport = { ...viewportRef.current, ...inViewport, pitch: 0, bearing: 0 }\n        // Constrict bounds\n        if (zoomBounds && newViewport.zoom) {\n            if (newViewport.zoom > zoomBounds[1]) newViewport.zoom = zoomBounds[1]\n            else if (newViewport.zoom < zoomBounds[0]) newViewport.zoom = zoomBounds[0]\n        }\n        if (bounds && newViewport.longitude && newViewport.latitude) {\n            if (newViewport.longitude < bounds[0]) newViewport.longitude = bounds[0]\n            else if (newViewport.longitude > bounds[2]) newViewport.longitude = bounds[2]\n            if (newViewport.latitude < bounds[1]) newViewport.latitude = bounds[1]\n            else if (newViewport.latitude > bounds[3]) newViewport.latitude = bounds[3]\n        }\n\n        debounceConsoleLog('setViewport DEBOUNCED', { inViewport, newViewport, bounds, layers })\n        _setViewport(newViewport)\n    }\n\n    const baseStyle = mapStyles.find((bs) => bs.id === baseLayer) as BaseLayer\n\n    // When loading we may get an initial zoom and/or bounds value\n    useEffect(() => {\n        const newViewport = { ...viewportRef.current }\n        // First set\n        if (!newViewport.latitude && bounds) {\n            setViewport({\n                ...newViewport,\n                longitude: (bounds[0] + bounds[2]) / 2,\n                latitude: (bounds[1] + bounds[3]) / 2\n            })\n        }\n    }, [bounds, zoomBounds])\n\n    // We need to check if there are new urls\n    const mapLayers = useMemo(() => {\n        const layerEls: React.ReactElement[] = []\n        layers.forEach((mlayer, idx) => {\n            const reactkey = `mapLayer-${idx}`\n            let newComp: React.ReactElement | null = null\n            switch (mlayer.leaf.layerType) {\n                case ProjectTreeLayerTypes.polygon:\n                    newComp = <RSPolygon key={reactkey} layer={mlayer} lyrId={layerEls.length} />\n                    break\n                case ProjectTreeLayerTypes.line:\n                    newComp = <RSLine key={reactkey} layer={mlayer} lyrId={layerEls.length} />\n                    break\n                case ProjectTreeLayerTypes.point:\n                    newComp = <RSPoint key={reactkey} layer={mlayer} lyrId={layerEls.length} />\n                    break\n                case ProjectTreeLayerTypes.raster:\n                    newComp = <RSRaster key={reactkey} layer={mlayer} lyrId={layerEls.length} />\n                    break\n                default:\n                    newComp = null\n                    break\n            }\n            if (newComp) layerEls.push(newComp)\n        })\n        return layerEls\n    }, [layers, layers.map(({ tiles }) => tiles?.tileJSON)])\n\n    // NO HOOKS BELOW HERE\n    if (!baseStyle || !bounds) return <div>loading...</div>\n    return (\n        <MapGL\n            {...viewport}\n            width=\"100%\"\n            height=\"100%\"\n            minZoom={zoomBounds[0] || 4}\n            maxZoom={zoomBounds[1] || 20}\n            mapStyle={baseStyle.style}\n            clickRadius={2}\n            // onClick={onClick}\n            // getCursor={getCursor}\n            // interactiveLayerIds={interactiveLayerIds}\n            onViewportChange={setViewport}\n            mapboxApiAccessToken={config.mapConfig.mapBoxToken}\n        >\n            {mapLayers}\n            {/* {layers.map((mlayer, idx) => (\n                <div key={`mapLayerlabel-${idx}`} style={{ color: 'white', background: 'black' }}>\n                    {mlayer.leaf.url} {mlayer.leaf.layerType}\n                </div>\n            ))} */}\n            {children}\n        </MapGL>\n    )\n}\n\nexport default Map\n","import React from 'react'\n\nimport { dates } from '@northarrowresearch/common'\nimport { DownloadZipBtn, PendingZips } from '@riverscapes/react-common'\nimport Paper from '@material-ui/core/Paper'\nimport Divider from '@material-ui/core/Divider'\nimport { warehouseUrl } from '../../config'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\nimport { Project } from '@riverscapes/common'\nimport MetaData from './MetaData'\nimport WHButton from '../WHButton'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(1),\n        height: '100%',\n        overflowY: 'scroll',\n        userSelect: 'text',\n        '& *': {\n            userSelect: 'text'\n        }\n    },\n    btnGroup: {\n        width: '100%',\n        display: 'flex',\n        justifyContent: 'space-between',\n        '&>*': {\n            flex: '0 0 calc(50% - 0.5em)'\n        },\n        margin: theme.spacing(1, 1, 3, 1)\n    },\n    divider: {\n        marginTop: theme.spacing(3)\n    },\n    footerLogo: {}\n}))\n\ninterface ProjectInfoTabProps {\n    project: Project\n    downloadZipFile: (project: Project) => Promise<void>\n    pendingZips: PendingZips\n}\n\nconst ProjectInfoTab: React.FC<ProjectInfoTabProps> = ({\n    project,\n    downloadZipFile,\n    pendingZips\n}: ProjectInfoTabProps) => {\n    const classes = useStyles()\n\n    const projectInfo = {\n        Title: project.name,\n        Type: project.projType,\n        'Warehouse ID': project.id,\n        'Warehouse Tags': Array.isArray(project.tags) ? project.tags.join(', ') : '<None>',\n        'Project Created': `${dates.formatDate(project.createdOn, 'lll')} (${dates.formatDateAgo(project.createdOn)})`,\n        'Project Updated': `${dates.formatDate(project.updatedOn, 'lll')} (${dates.formatDateAgo(project.updatedOn)})`\n    }\n    const pendingSince = project && pendingZips[project.id]\n    return (\n        <Paper className={classes.root}>\n            <Typography variant=\"h4\" paragraph color=\"textPrimary\">\n                {project.projType} Project\n            </Typography>\n            <Divider />\n            <Typography component=\"div\" paragraph>\n                This project exists as part of the Riverscapes Warehouse. You can visit the warehouse or download this\n                project and all its layers as a zip file\n            </Typography>\n            <div className={classes.btnGroup}>\n                <WHButton title={`Warehouse`} href={`${warehouseUrl}/#/${project.program}/${project.id}`} />\n                <DownloadZipBtn\n                    downloadZipFile={downloadZipFile}\n                    pendingSince={pendingSince}\n                    project={project}\n                    // btnProps={{}}\n                    title=\"Download\"\n                />\n            </div>\n            <MetaData title=\"Project Information\" meta={projectInfo} />\n            <MetaData title=\"Project Metadata\" meta={project.meta} />\n\n            <Divider className={classes.divider} />\n            <img\n                className={classes.footerLogo}\n                alt=\"footer\"\n                src={`${process.env.PUBLIC_URL}/cc-watermarks-riverscapes_orig.png`}\n            />\n        </Paper>\n    )\n}\n\nexport default ProjectInfoTab\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport Divider from '@material-ui/core/Divider'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport CancelIcon from '@material-ui/icons/Cancel'\nimport LayerIcon from '../LayerIcon'\nimport { ProjectTreeLeaf, ProjectTreeLayerTypes } from '@riverscapes/common'\nimport { MapLayer } from '../../types'\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n    container: {},\n    root: {\n        marginTop: theme.spacing(2)\n    },\n    heading: {\n        marginTop: theme.spacing(1)\n    },\n    layerItem: {\n        display: 'flex'\n    },\n    legendName: {\n        flexGrow: 1\n    },\n    deleteButtonHover: {},\n    legendColor: {\n        border: '1px solid black',\n        width: '20px',\n        display: 'inline-block',\n        height: '14px',\n        marginRight: '5px'\n    },\n    deleteButton: {\n        flexGrow: 0,\n        color: '#AAAAAA'\n    }\n}))\n\ninterface LayerListProps {\n    layers: MapLayer[]\n    removeItem: (item: ProjectTreeLeaf) => void\n}\n\nconst LayerList: React.FC<LayerListProps> = ({ layers, removeItem }: LayerListProps) => {\n    const classes = useStyles()\n    const theme = useTheme()\n    return (\n        <div className={classes.container}>\n            <Typography className={classes.heading} variant=\"body2\">\n                Map Legend\n            </Typography>\n            <Divider />\n            <List dense>\n                {layers.map((lyr, idx) => {\n                    // const contrastText =\n                    //     lyr.leaf.layerType === ProjectTreeLayerTypes.raster\n                    //         ? '#000000'\n                    //         : theme.palette.getContrastText(lyr.legend.color[500])\n                    const color =\n                        lyr.leaf.layerType === ProjectTreeLayerTypes.raster ? '#000000' : lyr.legend.color[500]\n                    return (\n                        <ListItem key={`legenditem-${idx}`}>\n                            <ListItemAvatar>\n                                <LayerIcon\n                                    layerType={lyr.leaf.layerType}\n                                    iconProps={{\n                                        style: { color }\n                                    }}\n                                />\n                            </ListItemAvatar>\n                            <ListItemText primary={lyr.leaf.label} />\n                            <ListItemSecondaryAction>\n                                <IconButton\n                                    edge=\"end\"\n                                    aria-label=\"delete\"\n                                    onClick={(event) => {\n                                        event.stopPropagation()\n                                        removeItem(lyr.leaf)\n                                    }}\n                                >\n                                    <CancelIcon />\n                                </IconButton>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                    )\n                })}\n            </List>\n\n            {/* <TreeView\n                className={classes.root}\n                defaultCollapseIcon={<ExpandMoreIcon />}\n                defaultExpandIcon={<ChevronRightIcon />}\n            >\n                {layers.map((lyr, idx) => (\n                    <TreeItem\n                        key={`lyr-${idx}`}\n                        nodeId={`lyr-${idx}`}\n                        label={\n                            <div className={classes.layerItem}>\n                                <LayerIcon layerType={lyr.leaf.layerType} />\n                                <Typography className={classes.legendName}>{lyr.leaf.label}</Typography>\n                                <IconButton\n                                    className={classes.deleteButton}\n                                    aria-label=\"upload picture\"\n                                    component=\"span\"\n                                    size=\"small\"\n                                    onClick={(event) => {\n                                        event.stopPropagation()\n                                        removeItem(lyr.leaf)\n                                    }}\n                                >\n                                    <CancelIcon />\n                                </IconButton>\n                            </div>\n                        }\n                    >\n                        {RandomLegend(classes)}\n                    </TreeItem>\n                ))}\n            </TreeView> */}\n        </div>\n    )\n}\n\nexport default LayerList\n\n// const RandomLegend = (classes) => {\n//     const range = [_.random(-10, 0, true), _.random(0.1, 50, true)]\n//     const divisions = _.random(3, 10)\n//     const incr = (range[1] - range[0]) / divisions\n//     const legend: unknown[] = []\n//     const hue = _.random(10, 250)\n//     for (let idx = range[0]; idx < range[1]; idx += incr) {\n//         const bottom = idx.toFixed(2)\n//         const top = (idx + incr).toFixed(2)\n//         const percent = (50 + 50 * (idx / (range[1] - range[0]))).toFixed(0)\n//         legend.push(\n//             <TreeItem\n//                 key={`legend-${idx}`}\n//                 nodeId={`legend-${idx}`}\n//                 label={\n//                     <>\n//                         <span\n//                             className={classes.legendColor}\n//                             style={{ backgroundColor: `hsl(${hue},100%,${percent}%)` }}\n//                         >\n//                             {' '}\n//                         </span>\n\n//                         {`${bottom} - ${top}`}\n//                     </>\n//                 }\n//             />\n//         )\n//     }\n//     return [legend]\n// }\n","import React, { useMemo } from 'react'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Typography from '@material-ui/core/Typography'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport { ProjectTreeView } from '@riverscapes/common'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(1, 0)\n    }\n}))\n\ninterface LegendProps {\n    activeView: string\n    defaultView?: string\n    projectViews: ProjectTreeView[]\n    handleChange: (viewId: string) => void\n}\nconst Legend2: React.FC<LegendProps> = ({ activeView, defaultView, projectViews, handleChange }: LegendProps) => {\n    const classes = useStyles()\n    const viewOptions = useMemo(() => {\n        const viewOpts =\n            projectViews.map((v, idx) => {\n                const isDefault = v.id === defaultView\n                const defaultString = isDefault ? '(default)' : ''\n                return (\n                    <MenuItem key={`view-${idx}`} value={v.id}>\n                        {v.name} {defaultString}\n                    </MenuItem>\n                )\n            }) || []\n        return [\n            ...viewOpts,\n            activeView === 'custom' && (\n                <MenuItem key=\"custom\" value=\"custom\">\n                    <Typography variant=\"subtitle1\" color=\"textSecondary\">\n                        <em>Custom view</em>\n                    </Typography>\n                </MenuItem>\n            )\n        ]\n    }, [projectViews, activeView])\n\n    return (\n        <FormControl className={classes.root} fullWidth>\n            <InputLabel htmlFor=\"grouped-native-select\">Curated Views</InputLabel>\n            <Select\n                id=\"view\"\n                value={activeView}\n                variant=\"filled\"\n                onChange={(event) => handleChange(event.target.value as string)}\n            >\n                {viewOptions}\n            </Select>\n        </FormControl>\n    )\n}\n\nexport default Legend2\n","import React, { useMemo } from 'react'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport { BaseLayer } from '../../types'\n\ninterface BaseLayerPickerProps {\n    baseLayer: string\n    baseLayers: BaseLayer[]\n    setBaseLayer: (baseLayerId: string) => void\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {},\n    menuIcon: {\n        marginRight: theme.spacing(1)\n    },\n    menuItem: {\n        display: 'flex'\n    }\n}))\n\nconst BaseLayerPicker: React.FC<BaseLayerPickerProps> = ({\n    baseLayer,\n    baseLayers,\n    setBaseLayer\n}: BaseLayerPickerProps) => {\n    const classes = useStyles()\n\n    const viewOptions = useMemo(\n        () =>\n            baseLayers.map((v, idx) => {\n                const Icon = v.Icon\n                return (\n                    <MenuItem key={`view-${idx}`} value={v.id} className={classes.menuItem}>\n                        <Icon className={classes.menuIcon} />\n                        <Typography>{v.title}</Typography>\n                    </MenuItem>\n                )\n            }),\n        [baseLayers]\n    )\n\n    return (\n        <FormControl className={classes.root} fullWidth>\n            <InputLabel>Basemap</InputLabel>\n            <Select\n                id=\"baselayer\"\n                value={baseLayer}\n                variant=\"filled\"\n                classes={{\n                    selectMenu: classes.menuItem\n                }}\n                onChange={(event) => setBaseLayer(event.target.value as string)}\n            >\n                {viewOptions}\n            </Select>\n        </FormControl>\n    )\n}\n\nexport default BaseLayerPicker\n","import React from 'react'\nimport { Project, ProjectTreeLeaf } from '@riverscapes/common'\nimport LayerList from './LayerList'\nimport ViewList from './ViewList'\nimport BaseLayerPicker from './BaseLayerPicker'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\nimport { BaseLayer, MapLayer } from '../../types'\n\nconst useStyles = makeStyles(() => ({\n    root: {},\n    subheaders: {\n        background: 'white'\n    }\n}))\n\ninterface LegendProps {\n    project: Project\n    error?: string\n    viewId: string\n    layers: MapLayer[]\n    baseLayer: string\n    baseLayers: BaseLayer[]\n    setViewId: (viewId: string) => void\n    setBaseLayer: (viewId: string) => void\n    removeLayer: (val: ProjectTreeLeaf) => void\n}\n\nconst Legend: React.FC<LegendProps> = ({\n    project,\n    layers,\n    baseLayer,\n    baseLayers,\n    setBaseLayer,\n    removeLayer,\n    error,\n    viewId,\n    setViewId\n}: LegendProps) => {\n    const classes = useStyles()\n    return (\n        <div className={classes.root}>\n            <BaseLayerPicker baseLayer={baseLayer} baseLayers={baseLayers} setBaseLayer={setBaseLayer} />\n            {project.tree.views && (\n                <ViewList\n                    activeView={viewId as string}\n                    defaultView={project.tree.defaultView}\n                    handleChange={setViewId}\n                    projectViews={project.tree.views}\n                />\n            )}\n            {/* <Typography variant=\"body2\" component=\"div\">\n                {viewId && viewId.length > 0 && viewId !== 'custom' && (\n                    <span>\n                        This could be a quick explanation of what this view is all about, telling us about{' '}\n                        <pre style={{ display: 'inline', fontFamily: 'monospaced' }}>view: {viewId}</pre> and the story\n                        we want it to tell.\n                    </span>\n                )}\n            </Typography> */}\n            <LayerList layers={layers} removeItem={removeLayer} />\n            <Typography color=\"error\">{error}</Typography>\n        </div>\n    )\n}\n\nexport default Legend\n","import React, { useState, useMemo } from 'react'\n\nimport baseLayers from '../mapStyles'\n\nimport LayersIcon from '@material-ui/icons/Layers'\nimport LayersClearIcon from '@material-ui/icons/LayersClear'\nimport IconButton from '@material-ui/core/IconButton'\n// import { Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport useMapLayers from '../hooks/useMapLayers'\nimport useTileLayers from '../hooks/useTileLayers'\nimport RaveProjectTree from '../lib/RaveProjectTree'\n\nimport { Project } from '@riverscapes/common'\nimport { PendingZips } from '@riverscapes/react-common'\nimport TreeDrawer from './tree/TreeDrawer'\nimport TreeControl from './tree/TreeControl'\nimport AppSplitter from './AppSplitter'\nimport Map from './map/Map'\nimport ProjectInfoTab from './tree/ProjectInfoTab'\n\nimport Legend from './legend/Legend'\n\nconst DRAWER_WIDTH = '25%'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        marginLeft: theme.spacing(1)\n    },\n    container: {\n        display: 'flex',\n        height: '100%'\n    },\n    legendBox: {\n        padding: theme.spacing(1),\n        border: '1px solid #999999',\n        borderRadius: 5,\n        position: 'absolute',\n        background: 'white',\n        width: 270,\n        boxShadow: '3px 3px 3px #00000066',\n        top: 15,\n        right: 15\n    },\n    mapMock: {\n        position: 'relative',\n        background: '#AAAAFF',\n        height: '100%',\n        width: '100%',\n        '&>h1': {\n            color: '#9999FF',\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)'\n        }\n    },\n    drawerContents: {\n        // border: '1px solid green',\n        height: '100%',\n        display: 'flex'\n    },\n    drawerSpacer: {\n        flex: '0 0 0%'\n    },\n    drawerSpacerOpen: {\n        flex: `0 0 ${DRAWER_WIDTH}`\n    },\n    dialogContainer: {\n        alignItems: 'left',\n        justifyContent: 'left'\n    },\n    dialog: {\n        position: 'absolute',\n        margin: 0,\n        left: '20px',\n        top: '20px'\n    },\n    subheaders: {\n        background: 'white'\n    },\n    dummyText: {}\n}))\n\ninterface AppMockProps {\n    project: Project\n    downloadZipFile: (project: Project) => Promise<void>\n    pendingZips: PendingZips\n}\n\nconst App: React.FC<AppMockProps> = ({ project, downloadZipFile, pendingZips }: AppMockProps) => {\n    const classes = useStyles()\n    const [drawerOpen, setDrawerOpen] = useState<boolean>(true)\n    const [baseLayer, setBaseLayer] = useState<string>(baseLayers[0].id)\n\n    const toggleDrawer = () => setDrawerOpen(!drawerOpen)\n\n    const treeObj = useMemo(() => (project ? new RaveProjectTree(project) : undefined), [project])\n    const { tiles, bounds, zoomBounds } = useTileLayers(treeObj as RaveProjectTree)\n    const { currView, layersError, layers, addLayer, removeLayer, changeView } = useMapLayers(project, tiles)\n\n    /**\n     * tiles:  Record<string, TileService>\n     * treeObj: RaveProjectTree\n     * project:\n     */\n\n    return (\n        <AppSplitter\n            open={drawerOpen}\n            split=\"vertical\"\n            primary=\"second\"\n            minSize={500}\n            maxSize=\"85%\"\n            defaultSize=\"75%\"\n            child1={\n                <TreeDrawer\n                    tabs={[\n                        {\n                            label: 'Project Tree',\n                            value: (\n                                <TreeControl\n                                    treeObj={treeObj as RaveProjectTree}\n                                    tiles={tiles}\n                                    layers={layers}\n                                    addLayer={addLayer}\n                                    removeLayer={removeLayer}\n                                />\n                            )\n                        },\n                        {\n                            label: 'Info',\n                            value: (\n                                <ProjectInfoTab\n                                    project={project}\n                                    downloadZipFile={downloadZipFile}\n                                    pendingZips={pendingZips}\n                                />\n                            )\n                        }\n                    ]}\n                    // width={DRAWER_WIDTH}\n                />\n            }\n            child2={\n                <main className={classes.mapMock}>\n                    <Map layers={layers} baseLayer={baseLayer} bounds={bounds} zoomBounds={zoomBounds}>\n                        <IconButton onClick={toggleDrawer}>\n                            {drawerOpen ? <LayersClearIcon /> : <LayersIcon />}\n                        </IconButton>\n                        <div className={classes.legendBox}>\n                            <Legend\n                                project={project}\n                                error={layersError}\n                                viewId={currView as string}\n                                layers={layers}\n                                baseLayer={baseLayer}\n                                baseLayers={baseLayers}\n                                setBaseLayer={setBaseLayer}\n                                setViewId={changeView}\n                                removeLayer={removeLayer}\n                            />\n                        </div>\n                    </Map>\n                </main>\n            }\n        />\n    )\n}\n\nexport default App\n","import React from 'react'\nimport { History, Match } from 'react-router-dom'\nimport AppWrapper from '../components/AppWrapper'\nimport log from 'loglevel'\n// import { useHosted } from '@northarrowresearch/react-auth'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { Typography, CircularProgress } from '@material-ui/core'\n\nimport { Loading } from '@northarrowresearch/react-common'\nimport { useDownloads, NotAllowedModal, useProgram, useProject } from '@riverscapes/react-common'\nimport { Program, WarehouseRoleEnum } from '@riverscapes/common'\nimport App from '../components/App'\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\ninterface Props {\n    auth: UseHostedReturn\n    match: Match\n    history: History\n    programs: Program[]\n}\n\nconst AppConnect: React.FC<Props> = ({ match, history, auth, programs }: Props) => {\n    const program = useProgram(match, programs)\n    const { project, loading: isProjLoading } = useProject(auth, match, program, false, true)\n    const { downloadZipFile, pendingZips } = useDownloads(auth, program as Program)\n    // const { query, setQuery } = useQueryParams()\n\n    const hasViewAccess = program && Object.values(WarehouseRoleEnum).indexOf(program.role) > -1\n    log.info('App.Connect', { hasViewAccess, program, isProjLoading, project, match, history })\n    if (!hasViewAccess) return <NotAllowedModal program={program as Program} onClose={(): void => history.push('/')} />\n\n    return (\n        <AppWrapper title={project?.name || 'Loading'} history={history} match={match}>\n            <>\n                {isProjLoading && (\n                    <Loading\n                        logoSVG={<CircularProgress size=\"7rem\" thickness={7} />}\n                        status={\n                            <Typography variant=\"h5\" component=\"div\">\n                                Loading Project...\n                            </Typography>\n                        }\n                        containerProps={{\n                            maxWidth: 'xl',\n                            style: {\n                                position: 'absolute',\n                                zIndex: 1000,\n                                top: 0,\n                                left: 0,\n                                width: '100%',\n                                height: '100%',\n                                background: '#FFFFFF77'\n                            }\n                        }}\n                    />\n                )}\n                {project && <App project={project} downloadZipFile={downloadZipFile} pendingZips={pendingZips} />}\n            </>\n        </AppWrapper>\n    )\n}\nexport default AppConnect\n","import React, { useState, useEffect, useCallback } from 'react'\nimport AppConnect from './App.connect'\nimport { LoginScreen, config } from '@riverscapes/react-common'\nimport { Route, Switch, History, useHistory } from 'react-router-dom'\nimport { Loading } from '@northarrowresearch/react-common'\nimport { useHosted, UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { warehouseIconUrl, appName } from '../config'\nimport { authCheck } from '@riverscapes/common'\nimport AppWrapper from '../components/AppWrapper'\nimport { Program, Project, getPrograms } from '@riverscapes/common'\nimport log from 'loglevel'\n\nconst AppAuthConnect: React.FC = () => {\n    const [authInfo, setAuthInfo] = useState<Record<string, unknown>>()\n    const [programsState, setProgramsState] = useState<{ programs: Program[]; loading: boolean }>()\n    const [isAppPreLoading, setIsAppPreLoading] = useState(true)\n    const auth: UseHostedReturn = useHosted(authInfo as Record<string, unknown>, false, config.isDev)\n    const history = useHistory()\n\n    // Go get all the startup info we need to start logging in\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        authCheck(config.endpoints.graphql, '')\n            .then((authResp) => {\n                log.debug('authResp', authResp)\n                const authVals = authResp.data?.auth\n                if (authVals && authVals.region) {\n                    setAuthInfo({\n                        region: authVals.region,\n                        userPoolId: authVals.userPool,\n                        userPoolWebClientId: authVals.clientId,\n                        mandatorySignIn: true,\n                        oauth: {\n                            domain: authVals.domain,\n                            scope: ['email', 'profile', 'openid'],\n                            redirectSignIn: config.redirectUrl.toString(),\n                            redirectSignOut: config.redirectUrl.toString(),\n                            responseType: 'code'\n                        }\n                    })\n                    setIsAppPreLoading(false)\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n            })\n    }, [])\n\n    // This lets us do a redirect after login using localstorage\n    useEffect(() => {\n        if (!history) return\n        const storageUrl = localStorage.getItem('RSUrl')\n        const localUrl = history.location.pathname\n        log.debug('LOCALSTORAGE:::REDIRECT checking', storageUrl, localUrl, auth)\n\n        if (!auth.isAuthenticated && !auth.error && auth.isAuthComplete) {\n            log.debug('LOCALSTORAGE:::SET', localUrl)\n            localStorage.setItem('RSUrl', localUrl)\n        }\n        if (storageUrl && auth.isAuthenticated && auth.isAuthComplete && !auth.error) {\n            if (localUrl !== storageUrl) {\n                log.debug('LOCALSTORAGE:::REDIRECT', localUrl, storageUrl)\n                history.push(storageUrl)\n            }\n            localStorage.removeItem('RSUrl')\n        }\n    }, [history, auth])\n\n    const navigate = useCallback((history: History, program: Program, project?: Project): void => {\n        if (project) history.push('/' + program.machineName + '/' + project.id)\n        else history.push('/' + program.machineName)\n    }, [])\n\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        if (!auth.isAuthenticated || programsState?.programs) return\n        setProgramsState({ programs: [], loading: true })\n        auth.getCurrentToken()\n            .then((jwt) => getPrograms(config.endpoints.graphql, jwt))\n            .then((allPrograms) => {\n                log.debug('API GetPrograms', allPrograms)\n                if (allPrograms.data && allPrograms.data.programs) {\n                    setProgramsState({ programs: allPrograms.data.programs, loading: false })\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n                // setIsAppPreLoading(false)\n            })\n    }, [auth, programsState])\n\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n\n    // render the login helper screen if that's called for\n    if (isAppPreLoading) {\n        return (\n            <AppWrapper title=\"Loading authentication info\">\n                <Loading\n                    logoSVG={logoSVG}\n                    title={appName}\n                    message={'Loading authentication info'}\n                    version={config.version}\n                />\n            </AppWrapper>\n        )\n    } else {\n        if (!auth.isAuthenticated) {\n            if (!auth.isAuthComplete) {\n                return (\n                    <AppWrapper title=\"webRAVE\">\n                        <Loading\n                            logoSVG={logoSVG}\n                            title=\"Authenticating\"\n                            message={'Authenticating'}\n                            version={config.version}\n                        />\n                    </AppWrapper>\n                )\n            }\n            return (\n                <AppWrapper title=\"Sign in\">\n                    <LoginScreen signIn={auth.signIn} />\n                </AppWrapper>\n            )\n        } else if (!programsState || programsState?.loading) {\n            return (\n                <AppWrapper title=\"webRAVE\">\n                    <Loading\n                        logoSVG={logoSVG}\n                        title={'Riverscapes Warehouse'}\n                        message={'Loading Programs'}\n                        version={config.version}\n                    />\n                </AppWrapper>\n            )\n        } else {\n            const appWrapProps = { navigate, signOut: auth.signOut, programs: programsState?.programs as Program[] }\n            return (\n                <Switch>\n                    <Route\n                        path=\"/:program/:project?\"\n                        render={(props): React.ReactElement => (\n                            <AppConnect {...props} auth={auth} programs={programsState?.programs} />\n                        )}\n                    />\n                    <Route\n                        path=\"*\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                404 Not found\n                            </AppWrapper>\n                        )}\n                    />\n                </Switch>\n            )\n        }\n    }\n}\nexport default AppAuthConnect\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppAuthConnect from './connectors/AppAuth.connect'\nimport { HashRouter } from 'react-router-dom'\nimport log from 'loglevel'\nimport { devSetup } from '@northarrowresearch/react-common'\n\n// Here's our global overrides css\nimport './base.css'\n\n// This does its own process.env.NODE_ENV check\n// In production it only presents a minimal set of tools\ndevSetup()\n\n// This is the font we need\nrequire('typeface-roboto')\n\nReactDOM.render(\n    <HashRouter basename=\"/\">\n        <AppAuthConnect />\n    </HashRouter>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n    window.history.pushState({}, '')\n})\n\n// In Chrome > 52 we need to explicitly request persistent storage to make sure our\n// stuff isn't cleaned up automatically.\nif (navigator.storage && navigator.storage.persist) {\n    navigator.storage.persist().then((granted) => {\n        if (granted) {\n            log.debug('Storage will not be cleared except by explicit user action')\n        } else {\n            log.warn('Storage may be cleared by the UA under storage pressure.')\n        }\n    })\n} else {\n    log.warn('navigator.storage API not implemented.')\n}\n"],"sourceRoot":""}